<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>HJNF</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <!-- EmailJS ìŠ¤í¬ë¦½íŠ¸ ì‚­ì œë¨ -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9686733290484221"
    crossorigin="anonymous"></script>
  <style>
    body {
      min-height: 100vh;
      background: #18191c;
      font-family: 'Noto Sans KR', 'Montserrat', Arial, sans-serif;
      margin: 0;
      }

    @keyframes fadeInBg {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .container {
      max-width: 900px;
      width: 100%;
      margin: 80px auto 0 auto;
      background: #232428;
      border-radius: 18px;
      box-shadow: 0 6px 32px 0 rgba(0,0,0,0.18);
      padding: 40px 48px 48px 260px;
      position: relative;
      border: none;
      z-index: 1;
      color: #e3e3e3;
      min-height: 700px;
      overflow: visible;
    }
    /* Roblox style top nav */
    .roblox-nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 56px;
      background: #d32c2c;
      color: #fff;
      display: flex;
      align-items: center;
      z-index: 100;
      box-shadow: 0 2px 8px #0005;
    }
    .roblox-logo {
      font-weight: 900;
      font-size: 2.1rem;
      letter-spacing: 2px;
      margin-left: 32px;
      margin-right: 32px;
      font-family: 'Montserrat', 'Noto Sans KR', Arial, sans-serif;
      color: #fff;
      text-shadow: 0 2px 8px #0008;
    }
    .roblox-nav-links {
      display: flex;
      gap: 32px;
      font-size: 1.1rem;
      font-weight: 700;
    }
    .roblox-nav-links a {
      color: #fff;
      text-decoration: none;
      padding: 8px 0;
      border-bottom: 2px solid transparent;
      transition: border 0.2s;
    }
    .roblox-nav-links a:hover {
      border-bottom: 2px solid #fff;
    }
    .roblox-nav-search {
      margin-left: auto;
      margin-right: 40px;
    }
    .roblox-nav-search input {
      background: #232428;
      border: none;
      border-radius: 8px;
      padding: 8px 18px;
      color: #fff;
      font-size: 1rem;
      outline: none;
      width: 260px;
    }
    /* Roblox style sidebar */
    .roblox-sidebar {
      position: fixed;
      top: 56px;
      left: 0;
      width: 220px;
      height: calc(100vh - 56px);
      background: #202124;
      color: #fff;
      padding: 32px 0 0 0;
      z-index: 99;
      box-shadow: 2px 0 8px #0003;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .roblox-sidebar .sidebar-profile {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 0 24px 18px 24px;
      border-bottom: 1px solid #333;
      margin-bottom: 18px;
    }
    .roblox-sidebar .sidebar-profile .profile-img {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: #444;
      object-fit: cover;
    }
    .roblox-sidebar .sidebar-profile .profile-name {
      font-weight: 800;
      font-size: 1.1rem;
      color: #fff;
    }
    .roblox-sidebar .sidebar-link {
      padding: 10px 32px;
      color: #e3e3e3;
      font-size: 1.05rem;
      text-decoration: none;
      font-weight: 600;
      border-left: 4px solid transparent;
      transition: background 0.15s, border 0.15s;
      border-radius: 0 18px 18px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .roblox-sidebar .sidebar-link:hover, .roblox-sidebar .sidebar-link.active {
      background: #232428;
      border-left: 4px solid #d32c2c;
      color: #fff;
    }
    .container::before {
      display: none !important;
    }
    @keyframes fadeInCard {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    h2, h3 {
      color: #fff;
      margin-top: 0;
      font-family: 'Montserrat', 'Noto Sans KR', Arial, sans-serif;
      letter-spacing: 1.2px;
      font-weight: 800;
      font-size: 2.1rem;
      margin-bottom: 18px;
    }
    input, textarea {
      font-family: inherit;
      font-size: 15px;
      border-radius: 8px;
      border: 1.5px solid #232428;
      margin-bottom: 16px;
      padding: 13px;
      outline: none;
      box-sizing: border-box;
      transition: border-color 0.2s, box-shadow 0.2s, background 0.2s;
      background: #232428;
      color: #fff;
      box-shadow: 0 1px 4px #18191c;
    }
    input:focus, textarea:focus {
      border-color: #d32c2c;
      box-shadow: 0 0 0 2px #d32c2c55, 0 2px 8px #d32c2c33;
      background: #232428;
      color: #fff;
    }
    button {
      background: #d32c2c;
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      margin-right: 8px;
      font-weight: 700;
      box-shadow: 0 2px 8px #d32c2c55;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      letter-spacing: 0.5px;
      font-size: 17px;
      border-radius: 12px;
    }
    button:hover {
      background: #b71c1c;
      box-shadow: 0 4px 16px #d32c2c55;
      transform: translateY(-2px) scale(1.04);
    }
    #formContainer {
      margin-top: 28px;
      animation: fadeInForm 0.8s;
      position: relative;
      z-index: 1;
    }
    @keyframes fadeInForm {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #result {
      margin-top: 14px;
      color: #d32c2c;
      font-weight: bold;
      text-align: center;
      font-size: 17px;
      letter-spacing: 0.5px;
      border-radius: 8px;
      background: #232428;
      padding: 6px 0;
    }
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin-top: 16px;
      background: #232428;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px #18191c;
      font-size: 16px;
      color: #e3e3e3;
    }
    th, td {
      padding: 14px 12px;
      border-bottom: 1px solid #232428;
      text-align: left;
    }
    th {
      background: #202124;
      color: #fff;
      font-weight: 800;
      letter-spacing: 0.5px;
      font-size: 16px;
      border-top: 1.5px solid #232428;
    }
    tr:last-child td {
      border-bottom: none;
    }
    #showSignup, #showLogin, #logoutBtn, #showCommunity {
      margin: 10px 6px 0 0;
      padding: 13px 28px;
      font-size: 17px;
      border-radius: 10px;
      border: none;
      background: #2196f3;
      color: #fff;
      box-shadow: 0 2px 8px #90caf9;
      font-weight: 700;
      letter-spacing: 0.5px;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    #showSignup:hover, #showLogin:hover, #logoutBtn:hover, #showCommunity:hover {
      background: #1769aa;
      box-shadow: 0 4px 16px #2196f355;
      transform: translateY(-2px) scale(1.04);
    }
    #backToServer {
      background: #2196f3;
      color: #fff;
      border: none;
      font-weight: 700;
      margin-bottom: 18px;
      padding: 13px 24px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      box-shadow: 0 2px 8px #90caf9;
      letter-spacing: 0.5px;
    }
    #backToServer:hover {
      background: #1769aa;
      box-shadow: 0 4px 16px #2196f355;
      transform: translateY(-2px) scale(1.04);
    }
    .post-nickname {
      color: #d32c2c;
      font-size: 15px;
      font-weight: 700;
      margin-left: 10px;
      letter-spacing: 0.3px;
    }
    .post-content {
      color: #e3e3e3;
      margin: 8px 0 10px 0;
      display: block;
      font-size: 16px;
      line-height: 1.7;
    }
    .post-date {
      font-size: 13px;
      color: #bdbdbd;
      margin-left: 2px;
    }
    
    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    #modalBg {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    #modalContent {
      background: #232428;
      padding: 30px;
      border-radius: 15px;
      max-width: 500px;
      width: 90%;
      color: #fff;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    
    #closeModal {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #closeModal:hover {
      background: rgba(255,255,255,0.1);
    }
    
    /* ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    #loginButtons button, #userInfo button {
      margin: 5px;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    #loginButtons button {
      background: #2196f3;
      color: #fff;
    }
    
    #loginButtons button:hover {
      background: #1769aa;
      transform: translateY(-2px);
    }
    
    #userInfo button {
      background: #f44336;
      color: #fff;
    }
    
    #userInfo button:hover {
      background: #d32f2f;
      transform: translateY(-2px);
    }
    
    /* ì°¨ë‹¨/IPì°¨ë‹¨ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .blockBtn, .ipBlockBtn {
      padding: 6px 12px;
      margin: 2px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .blockBtn {
      background: #f44336;
      color: #fff;
    }
    
    .blockBtn:hover {
      background: #d32f2f;
      transform: translateY(-1px);
    }
    
    .ipBlockBtn {
      background: #ff9800;
      color: #fff;
    }
    
    .ipBlockBtn:hover {
      background: #f57c00;
      transform: translateY(-1px);
    }
    
    /* ì„œë²„ ê´€ë¦¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .approveServerBtn, .rejectServerBtn, .stopServerBtn, .pauseServerBtn, .deleteServerBtn {
      padding: 6px 12px;
      margin: 2px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .approveServerBtn {
      background: #4caf50;
      color: #fff;
    }
    
    .approveServerBtn:hover {
      background: #388e3c;
      transform: translateY(-1px);
    }
    
    .rejectServerBtn {
      background: #f44336;
      color: #fff;
    }
    
    .rejectServerBtn:hover {
      background: #d32f2f;
      transform: translateY(-1px);
    }
    
    .stopServerBtn {
      background: #ff5722;
      color: #fff;
    }
    
    .stopServerBtn:hover {
      background: #e64a19;
      transform: translateY(-1px);
    }
    
    .pauseServerBtn {
      background: #ff9800;
      color: #fff;
    }
    
    .pauseServerBtn:hover {
      background: #f57c00;
      transform: translateY(-1px);
    }
    
    .deleteServerBtn {
      background: #9c27b0;
      color: #fff;
    }
    
    .deleteServerBtn:hover {
      background: #7b1fa2;
      transform: translateY(-1px);
    }
    
    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    #modalBg {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    #modalContent {
      background: linear-gradient(135deg, #232428 0%, #2a2d32 100%);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.1);
      max-width: 450px;
      width: 90%;
      position: relative;
      animation: slideUp 0.4s ease-out;
    }

    @keyframes slideUp {
      from { 
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to { 
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes slideIn {
      from { 
        opacity: 0;
        transform: translateX(100%);
      }
      to { 
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideOut {
      from { 
        opacity: 1;
        transform: translateX(0);
      }
      to { 
        opacity: 0;
        transform: translateX(100%);
      }
    }

    #closeModal {
      position: absolute;
      top: 20px;
      right: 25px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      font-size: 18px;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #closeModal:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(90deg);
    }

    #modalContent h2 {
      color: #fff;
      margin-bottom: 30px;
      text-align: center;
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    #modalContent input {
      width: 100%;
      padding: 16px 20px;
      margin-bottom: 20px;
      border: 2px solid transparent;
      border-radius: 12px;
      background: rgba(24, 25, 28, 0.8);
      color: #fff;
      font-size: 16px;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }

    #modalContent input:focus {
      outline: none;
      border-color: #4ecdc4;
      background: rgba(24, 25, 28, 1);
      box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
    }

    #modalContent input::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    #modalContent button {
      width: 100%;
      padding: 16px;
      background: linear-gradient(45deg, #ff6b6b, #ee5a52);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    #modalContent button:hover {
      background: linear-gradient(45deg, #ff5252, #e53935);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
    }

    #modalContent button:active {
      transform: translateY(0);
    }

    #modalContent button:disabled {
      background: #666;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* ì¸ì¦ ì½”ë“œ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
    #emailVerificationSection {
      background: rgba(78, 205, 196, 0.1);
      border: 1px solid rgba(78, 205, 196, 0.3);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
    }

    #emailVerificationSection input {
      margin-bottom: 15px;
    }

    #verifyEmailBtn {
      background: linear-gradient(45deg, #4ecdc4, #44a08d) !important;
    }

    #verifyEmailBtn:hover {
      background: linear-gradient(45deg, #44a08d, #3d8b7a) !important;
      box-shadow: 0 10px 25px rgba(78, 205, 196, 0.4) !important;
    }

    #sendVerificationBtn {
      background: linear-gradient(45deg, #667eea, #764ba2) !important;
      margin-bottom: 20px;
    }

    #sendVerificationBtn:hover {
      background: linear-gradient(45deg, #5a6fd8, #6a4190) !important;
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4) !important;
    }

    #sendVerificationBtn:disabled {
      background: #666 !important;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
  </style>
</head>
<body>
  <!-- Roblox style top navigation bar -->
  <nav class="roblox-nav">
    <span class="roblox-logo">HJNF</span>
    <div class="roblox-nav-links">
      <a href="#" id="navHomeBtn">í™ˆ</a>
      <a href="#" id="navServerChartBtn">ì„œë²„ ì°¨íŠ¸</a>
      <a href="#" id="navCreateBtn">ë§Œë“¤ê¸°</a>
      <a href="#" id="navCommunityBtn">ì»¤ë®¤ë‹ˆí‹°</a>
    </div>
    <div class="roblox-nav-search">
      <input type="text" id="searchInput" placeholder="ê²€ìƒ‰..." />
    </div>
  </nav>

  <!-- Roblox style left sidebar -->
  <aside class="roblox-sidebar">
    <a href="#" class="sidebar-link" id="sidebarProfileLink">í”„ë¡œí•„</a>
    <a href="#" class="sidebar-link" id="sidebarMessageLink">ë©”ì‹œì§€</a>
    <a href="#" class="sidebar-link" id="sidebarFriendsLink">ì¹œêµ¬</a>
  <a href="#" class="sidebar-link">ì¸ë²¤í† ë¦¬</a>
  <a href="#" class="sidebar-link"><b>í”„ë¦¬ë¯¸ì—„</b></a>
    <a href="#" class="sidebar-link">ì´ë²¤íŠ¸</a>
    <a href="#" class="sidebar-link" id="sidebarCustomerServiceLink">ê³ ê°ì„¼í„°</a>
    <a href="#" class="sidebar-link" id="sidebarLanguageLink">ğŸŒ ì–¸ì–´ ì„¤ì •</a>
    <a href="#" class="sidebar-link" id="sidebarMembersBtn" style="display:none">ë§´ë²„ ëª©ë¡</a>
  </aside>

  <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
  <div class="container">
    <div id="formContainer">
      <h2>HJNF ì„œë²„ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
      <p>ë¡œë¸”ë¡ìŠ¤ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ê³  ì¹œêµ¬ë“¤ê³¼ ì†Œí†µí•˜ì„¸ìš”!</p>
      <div id="loginButtons" style="margin-top: 20px;">
        <button id="showLogin" onclick="showLoginForm()">ë¡œê·¸ì¸</button>
        <button id="showSignup" onclick="showSignupForm()">íšŒì›ê°€ì…</button>
      </div>
      <div id="userInfo" style="display: none; margin-top: 20px;">
        <p id="welcomeMessage">í™˜ì˜í•©ë‹ˆë‹¤, <span id="userNickname"></span>ë‹˜!</p>
        <button id="logoutBtn" onclick="auth.signOut().then(() => showHomePanel())">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>
  </div>

  <!-- ëª¨ë‹¬ ë°°ê²½ -->
  <div id="modalBg">
    <div id="modalContent">
      <button id="closeModal">&times;</button>
    </div>
  </div>

  <div class="ad-left">
    <!-- Google AdSense ê´‘ê³  ì˜ì—­ -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-9686733290484221"
         data-ad-slot="1234567890"
         data-ad-format="auto"></ins>
    <script>
    // í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰ ê´€ë¦¬ íŒ¨ë„ (ê´€ë¦¬ìë§Œ)
    function showPremiumPanel() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      db.ref('users').once('value').then(snap => {
        const users = snap.val() || {};
        const isAdmin = auth.currentUser.uid === ADMIN_UID;
        let html = '<h2>í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰ í˜„í™©</h2>';
        html += '<input type="text" id="premiumMemberSearchInput" placeholder="ë‹‰ë„¤ì„ ê²€ìƒ‰..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">';
        html += '<table id="premiumMemberTable" style="width:100%;background:#232428;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #18191c;font-size:16px;color:#e3e3e3;">';
        html += '<tr><th>ë‹‰ë„¤ì„</th><th>ë“±ê¸‰</th>' + (isAdmin ? '<th>ì„¤ì •</th>' : '') + '</tr>';
        for (const uid in users) {
          if (uid === ADMIN_UID) continue;
          const user = users[uid];
          const grade = user.premium || '';
          html += '<tr data-nick="' + (user.robloxNickname || '') + '" data-email="' + (user.email || '') + '">' +
            '<td>' + (user.robloxNickname || '-') + '</td>' +
            '<td id="premiumGrade-' + uid + '">' + (grade ? grade : '-') + '</td>';
          if (isAdmin) {
            html += '<td>' +
              '<select class="premiumSelect" data-uid="' + uid + '">' +
                '<option value="">ì—†ìŒ</option>' +
                '<option value="VIP">VIP</option>' +
                '<option value="VIP+">VIP+</option>' +
                '<option value="MVP">MVP</option>' +
                '<option value="MVP+">MVP+</option>' +
              '</select>' +
              '<button class="setPremiumBtn" data-uid="' + uid + '">ì„¤ì •</button>' +
            '</td>';
          }
          html += '</tr>';
        }
        html += '</table>';
        document.getElementById('formContainer').innerHTML = html;
        // ê²€ìƒ‰ í•„í„°
        document.getElementById('premiumMemberSearchInput').addEventListener('input', function() {
          const v = this.value.trim().toLowerCase();
          document.querySelectorAll('#premiumMemberTable tr[data-nick]').forEach(function(tr) {
            const nick = tr.getAttribute('data-nick').toLowerCase();
            tr.style.display = nick.includes(v) ? '' : 'none';
          });
        });
        if (isAdmin) {
          // ë“±ê¸‰ select ê°’ ì„¸íŒ…
          document.querySelectorAll('.premiumSelect').forEach(function(sel) {
            const uid = sel.getAttribute('data-uid');
            const user = users[uid];
            if (user && user.premium) sel.value = user.premium;
          });
          // ì„¤ì • ë²„íŠ¼ ì´ë²¤íŠ¸
          document.querySelectorAll('.setPremiumBtn').forEach(function(btn) {
            btn.onclick = function() {
              const uid = btn.getAttribute('data-uid');
              const sel = document.querySelector('.premiumSelect[data-uid="' + uid + '"]');
              const grade = sel.value;
              db.ref('users/' + uid + '/premium').set(grade || null);
              document.getElementById('premiumGrade-' + uid).innerText = grade || '-';
              btn.textContent = 'ì €ì¥ë¨';
              setTimeout(() => { btn.textContent = 'ì„¤ì •'; }, 1000);
            };
          });
        }
      });
    }
// ë©”ì‹œì§€(ì¹œêµ¬ DM) íŒ¨ë„
function showMessagePanel() {
  if (!auth.currentUser) {
    document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
    return;
  }
  
  db.ref('users/' + auth.currentUser.uid + '/friends').once('value').then(friendSnap => {
    const myFriends = friendSnap.val() || {};
    db.ref('users').once('value').then(snap => {
      const users = snap.val() || {};
      let html = '<h2>ë©”ì‹œì§€ (ì¹œêµ¬ ëª©ë¡)</h2>';
      
      // ì¹œêµ¬ê°€ ìˆëŠ”ì§€ í™•ì¸
      const friendUids = Object.keys(myFriends);
      if (friendUids.length === 0) {
        html += '<div style="background:#232428;padding:20px;border-radius:10px;text-align:center;color:#888;">';
        html += '<p>ì¹œêµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        html += '<p>ì¹œêµ¬ë¥¼ ì¶”ê°€í•œ í›„ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
        html += '<button onclick="showFriendsPanel()" style="margin-top:10px;padding:10px 20px;background:#2196f3;color:#fff;border:none;border-radius:8px;cursor:pointer;">ì¹œêµ¬ ì¶”ê°€í•˜ê¸°</button>';
        html += '</div>';
      } else {
        html += '<div style="background:#232428;padding:12px 18px;border-radius:10px;box-shadow:0 2px 8px #18191c;margin-bottom:18px;">';
        html += '<h3 style="color:#fff;margin:0 0 12px 0;">ğŸ’¬ ì¹œêµ¬ ëª©ë¡</h3>';
        html += '<ul id="dmFriendsList" style="list-style:none;margin:0;padding:0;">';
        
        friendUids.forEach(fuid => {
          if (users[fuid]) {
            html += '<li style="margin:8px 0;padding:12px;background:#333;border-radius:8px;cursor:pointer;transition:background 0.2s;" class="dmFriendItem" data-fuid="' + fuid + '" onmouseover="this.style.background=\'#444\'" onmouseout="this.style.background=\'#333\'">';
            html += '<div style="display:flex;align-items:center;gap:10px;">';
            html += '<div style="width:40px;height:40px;background:#555;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;">' + (users[fuid].robloxNickname || 'U').charAt(0).toUpperCase() + '</div>';
            html += '<div>';
            html += '<div style="font-weight:600;color:#fff;">' + (users[fuid].robloxNickname || 'ìµëª…') + '</div>';
            html += '<div style="font-size:12px;color:#aaa;">ë©”ì‹œì§€ ë³´ë‚´ê¸°</div>';
            html += '</div>';
            html += '</div>';
            html += '</li>';
          }
        });
        
        html += '</ul>';
        html += '</div>';
      }
      
      html += '<div id="dmChatPanel"></div>';
      document.getElementById('formContainer').innerHTML = html;
      
      // ì¹œêµ¬ í´ë¦­ ì‹œ ì±„íŒ…ì°½ ì—´ê¸°
      document.querySelectorAll('.dmFriendItem').forEach(function(li) {
        li.onclick = function() {
          const fuid = li.getAttribute('data-fuid');
          showDmChatPanel(fuid, users[fuid].robloxNickname || fuid);
        };
      });
    });
  });
}

    // DM ì±„íŒ… íŒ¨ë„ (êµ¬í˜„ ì˜ˆì •)
// DM ì±„íŒ… íŒ¨ë„ (êµ¬í˜„ ì˜ˆì •)
function showDmChatPanel(friendUid, friendNick) {
  if (!auth.currentUser) return;
  const myUid = auth.currentUser.uid;
  // uid1_uid2 (ì •ë ¬)
  const chatKey = myUid < friendUid ? (myUid + '_' + friendUid) : (friendUid + '_' + myUid);
  let html = '<div style="font-weight:700;font-size:1.2rem;margin-bottom:10px">[' + friendNick + ']ë‹˜ê³¼ì˜ ì±„íŒ…</div>';
  html += '<div id="dmChatHistory" style="height:260px;overflow-y:auto;background:#232428;padding:12px 10px 12px 10px;border-radius:10px;margin-bottom:12px;border:1.5px solid #232428;"></div>';
  html += '<form id="dmChatForm" style="display:flex;gap:8px;"><input id="dmChatInput" type="text" placeholder="ë©”ì‹œì§€ ì…ë ¥..." style="flex:1;padding:10px 14px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;"><button type="submit" style="background:#2196f3;color:#fff;font-weight:700;border:none;border-radius:8px;padding:10px 22px;">ì „ì†¡</button></form>';
  document.getElementById('dmChatPanel').innerHTML = html;

  // ë©”ì‹œì§€ ì‹¤ì‹œê°„ í‘œì‹œ
  const chatRef = db.ref('dmMessages/' + chatKey);
  chatRef.off();
  chatRef.on('value', function(snap) {
    const messages = snap.val() || {};
    let msgHtml = '';
    const msgArr = Object.entries(messages).sort((a, b) => a[1].timestamp - b[1].timestamp);
    msgArr.forEach(([key, msg]) => {
      const isMe = msg.from === myUid;
      msgHtml += '<div style="margin-bottom:8px;text-align:' + (isMe ? 'right' : 'left') + '">' +
        '<span style="display:inline-block;max-width:70%;padding:8px 14px;border-radius:12px;font-size:1rem;' +
        (isMe ? 'background:#2196f3;color:#fff;' : 'background:#333;color:#fff;') + '">' +
        (msg.text ? msg.text.replace(/</g,'&lt;').replace(/>/g,'&gt;') : '') +
        '</span><br>' +
        '<span style="font-size:11px;color:#aaa;margin-top:2px;">' +
        (msg.timeStr || '') + '</span>' +
        '</div>';
    });
    document.getElementById('dmChatHistory').innerHTML = msgHtml;
    // ìŠ¤í¬ë¡¤ ë§¨ ì•„ë˜ë¡œ
    document.getElementById('dmChatHistory').scrollTop = 99999;
  });

  // ë©”ì‹œì§€ ì „ì†¡
  document.getElementById('dmChatForm').onsubmit = function(e) {
    e.preventDefault();
    const input = document.getElementById('dmChatInput');
    const text = input.value.trim();
    if (!text) return;
    const now = Date.now();
    const timeStr = new Date(now).toLocaleString();
    chatRef.push({
      from: myUid,
      to: friendUid,
      text,
      timestamp: now,
      timeStr
    });
    input.value = '';
  };
}

// ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸° í•¨ìˆ˜ëŠ” í•­ìƒ ìµœìƒë‹¨ì— ìœ„ì¹˜ (ì „ì—­ì—ì„œ ì‚¬ìš© ê°€ëŠ¥)
function openModal(contentHtml) {
  document.getElementById('modalContent').innerHTML = contentHtml;
  document.getElementById('modalBg').style.display = 'flex';
}
function closeModal() {
  document.getElementById('modalBg').style.display = 'none';
  document.getElementById('modalContent').innerHTML = '';
}

// ì°¨ë‹¨ëœ ìœ ì € ì°¨ë‹¨ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
function showBlockedMessage(nick) {
  document.body.style.background = '#fff';
  document.body.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100vh;width:100vw;"><div style="font-size:1.2rem;font-weight:700;color:#222;text-align:center;">' + (nick ? (nick + 'ë‹˜ì€ ì˜êµ¬ ì°¨ë‹¨ ë˜ì—ˆìŒë‹ˆë‹¤.') : 'ì˜êµ¬ ì°¨ë‹¨ëœ ê³„ì •ì…ë‹ˆë‹¤.') + '</div></div>';
}

// ì¹œêµ¬ íŒ¨ë„ í•¨ìˆ˜
function showFriendsPanel() {
  if (!auth.currentUser) {
    document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
    return;
  }
  
  // ì¹œêµ¬ ìš”ì²­ì„ ê°€ì ¸ì˜¤ê¸°
  const loadFriendRequests = async () => {
    try {
      const requestSnap = await db.ref('friendRequests/' + auth.currentUser.uid).once('value');
      const requests = requestSnap.val() || {};
      const requestUids = Object.keys(requests).filter(uid => requests[uid].status === 'pending');
      
      let notifHtml = '';
      if (requestUids.length > 0) {
        notifHtml += '<div style="background:#ff9800;padding:16px 18px;border-radius:10px;margin-bottom:18px;box-shadow:0 2px 8px #18191c;">';
        notifHtml += '<h3 style="color:#fff;margin:0 0 12px 0;">ğŸ“¨ ë°›ì€ ì¹œêµ¬ ìš”ì²­ (' + requestUids.length + 'ê°œ)</h3>';
        notifHtml += '<ul style="margin:8px 0 0 0;padding:0;list-style:none;" id="friendRequestList">';
        
        // ê° ìš”ì²­ì— ëŒ€í•´ ë‹‰ë„¤ì„ì„ ê°€ì ¸ì™€ì„œ í‘œì‹œ
        for (const fromUid of requestUids) {
          const nickSnap = await db.ref('users/' + fromUid + '/robloxNickname').once('value');
          const nickname = nickSnap.val() || 'ìµëª…';
          const requestHtml = '<li style="margin:8px 0;padding:12px;background:#333;border-radius:8px;display:flex;justify-content:space-between;align-items:center;" data-fromuid="' + fromUid + '">' +
            '<div><strong>' + nickname + '</strong>ë‹˜ì´ ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.</div>' +
            '<div>' +
            '<button class="acceptFriendBtn" data-fromuid="' + fromUid + '" style="padding:6px 12px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;">ìˆ˜ë½</button>' +
            '<button class="rejectFriendBtn" data-fromuid="' + fromUid + '" style="padding:6px 12px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;">ê±°ì ˆ</button>' +
            '</div>' +
            '</li>';
          
          notifHtml += requestHtml;
        }
        
        notifHtml += '</ul></div>';
      }
      
      return notifHtml;
    } catch (error) {
      console.error('ì¹œêµ¬ ìš”ì²­ ë¡œë“œ ì˜¤ë¥˜:', error);
      return '';
    }
  };
  
  // ì¹œêµ¬ ëª©ë¡ì„ ê°€ì ¸ì˜¤ê¸°
  const loadFriendsList = async () => {
    try {
      const friendSnap = await db.ref('users/' + auth.currentUser.uid + '/friends').once('value');
      const myFriends = friendSnap.val() || {};
      const userSnap = await db.ref('users').once('value');
      const users = userSnap.val();
      
      const notifHtml = await loadFriendRequests();
      let html = notifHtml;
      html += '<h2>ë‚´ ì¹œêµ¬ ëª©ë¡</h2>';
      html += '<input type="text" id="friendSearchInput" placeholder="ë‹‰ë„¤ì„ ê²€ìƒ‰..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">';
      html += '<ul id="myFriendsList" style="background:#232428;padding:12px 18px;border-radius:10px;box-shadow:0 2px 8px #18191c;list-style:none;margin-bottom:18px;">';
      let hasFriend = false;
      for (const fuid in myFriends) {
        if (users[fuid]) {
          hasFriend = true;
          html += '<li style="margin:6px 0;" data-nick="' + (users[fuid].robloxNickname || '') + '">' +
            (users[fuid].robloxNickname || fuid) +
            ' <button class="deleteFriendBtn" data-fuid="' + fuid + '">ì¹œêµ¬ ì‚­ì œ</button></li>';
        }
      }
      if (!hasFriend) html += '<li>ì¹œêµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
      html += '</ul>';
      html += '<h2>ëª¨ë“  ë©¤ë²„ ëª©ë¡</h2>';
      html += '<input type="text" id="allMemberSearchInput" placeholder="ë‹‰ë„¤ì„ ê²€ìƒ‰..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">';
      html += '<table id="allMembersTable" style="width:100%;background:#232428;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #18191c;font-size:16px;color:#e3e3e3;">';
      html += '<tr><th>ë‹‰ë„¤ì„</th><th>ì¹œêµ¬ ì¶”ê°€</th></tr>';
      for (const uid in users) {
        if (uid === auth.currentUser.uid) continue;
        const user = users[uid];
        const isFriend = myFriends[uid];
        html += '<tr data-nick="' + (user.robloxNickname || '') + '">' +
          '<td>' + (user.robloxNickname || '-') + '</td>' +
          '<td>' + (isFriend ? '<span style="color:#aaa">ì´ë¯¸ ì¹œêµ¬</span>' : '<button class="addFriendBtn" data-uid="' + uid + '">ì¹œêµ¬ ì¶”ê°€</button>') + '</td>' +
          '</tr>';
      }
      html += '</table>';
      setTimeout(function() {
        var input = document.getElementById('allMemberSearchInput');
        if (input) {
          input.addEventListener('input', function() {
            const v = this.value.trim().toLowerCase();
            document.querySelectorAll('#allMembersTable tr[data-nick]').forEach(function(tr) {
              if (!v) {
                tr.style.display = '';
              } else {
                const nick = tr.getAttribute('data-nick').toLowerCase();
                tr.style.display = (nick.includes(v)) ? '' : 'none';
              }
            });
          });
          document.querySelectorAll('#allMembersTable tr[data-nick]').forEach(function(tr) {
            tr.style.display = '';
          });
        }
      }, 100);
      setTimeout(function() {
        var input = document.getElementById('friendSearchInput');
        if (input) {
            input.addEventListener('input', function() {
              const v = this.value.trim().toLowerCase();
              document.querySelectorAll('#myFriendsList li[data-nick]').forEach(function(li) {
                if (!v) {
                  li.style.display = '';
                } else {
                  const nick = li.getAttribute('data-nick').toLowerCase();
                  li.style.display = nick.includes(v) ? '' : 'none';
                }
              });
            });
          document.querySelectorAll('#myFriendsList li[data-nick]').forEach(function(li) {
            li.style.display = '';
          });
        }
      }, 100);
      document.querySelectorAll('.addFriendBtn').forEach(function(btn) {
        btn.onclick = function() {
          const targetUid = btn.getAttribute('data-uid');
          
          // ì´ë¯¸ ì¹œêµ¬ì¸ì§€ í™•ì¸
          if (myFriends[targetUid]) {
            alert('ì´ë¯¸ ì¹œêµ¬ì…ë‹ˆë‹¤.');
            return;
          }
          
          // ì´ë¯¸ ìš”ì²­ì„ ë³´ëƒˆëŠ”ì§€ í™•ì¸
          db.ref('friendRequests/' + targetUid + '/' + auth.currentUser.uid).once('value').then(function(snap) {
            if (snap.exists()) {
              alert('ì´ë¯¸ ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.');
              return;
            }
            
            // ì¹œêµ¬ ìš”ì²­ ì „ì†¡
            db.ref('friendRequests/' + targetUid + '/' + auth.currentUser.uid).set({
              status: 'pending',
              requestedAt: Date.now(),
              requesterUid: auth.currentUser.uid
            }).then(() => {
              btn.disabled = true;
              btn.textContent = 'ìš”ì²­ë¨';
              btn.style.background = '#666';
              alert('ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤!');
            }).catch(error => {
              alert('ì¹œêµ¬ ìš”ì²­ ì „ì†¡ ì‹¤íŒ¨: ' + error.message);
            });
          });
        };
      });
      document.querySelectorAll('.deleteFriendBtn').forEach(function(btn) {
        btn.onclick = function() {
          const fuid = btn.getAttribute('data-fuid');
          db.ref('users/' + auth.currentUser.uid + '/friends/' + fuid).remove();
          db.ref('users/' + fuid + '/friends/' + auth.currentUser.uid).remove();
          showFriendsPanel();
        };
      });
      if (typeof requestUids !== 'undefined' && requestUids.length > 0) {
        requestUids.forEach(function(fromUid) {
          const req = requests[fromUid];
          if (req.status === 'pending') {
            db.ref('users/' + fromUid + '/robloxNickname').once('value').then(function(nickSnap) {
              const nick = nickSnap.val() || fromUid;
              const li = document.querySelector('li[data-fromuid="' + fromUid + '"]');
              if (li) {
                const acceptBtn = li.querySelector('.acceptFriendBtn');
                const rejectBtn = li.querySelector('.rejectFriendBtn');
                li.innerHTML = nick + 'ë‹˜ì—ê²Œ ì¹œêµ¬ ìš”ì²­ì´ ì™”ìŠµë‹ˆë‹¤ ';
                li.appendChild(acceptBtn);
                li.appendChild(rejectBtn);
              }
            });
          }
        });
        // ì¹œêµ¬ ìš”ì²­ ìˆ˜ë½/ê±°ì ˆ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        setTimeout(function() {
          document.querySelectorAll('.acceptFriendBtn').forEach(function(btn) {
            btn.onclick = function() {
              const fromUid = btn.getAttribute('data-fromuid');
              if (confirm('ì¹œêµ¬ ìš”ì²­ì„ ìˆ˜ë½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ì–‘ë°©í–¥ ì¹œêµ¬ ê´€ê³„ ì„¤ì •
                db.ref('users/' + auth.currentUser.uid + '/friends/' + fromUid).set(true);
                db.ref('users/' + fromUid + '/friends/' + auth.currentUser.uid).set(true);
                // ì¹œêµ¬ ìš”ì²­ ì‚­ì œ
                db.ref('friendRequests/' + auth.currentUser.uid + '/' + fromUid).remove();
                alert('ì¹œêµ¬ ìš”ì²­ì„ ìˆ˜ë½í–ˆìŠµë‹ˆë‹¤!');
                showFriendsPanel(); // ì¹œêµ¬ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
              }
            };
          });
          
          document.querySelectorAll('.rejectFriendBtn').forEach(function(btn) {
            btn.onclick = function() {
              const fromUid = btn.getAttribute('data-fromuid');
              if (confirm('ì¹œêµ¬ ìš”ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ì¹œêµ¬ ìš”ì²­ë§Œ ì‚­ì œ
                db.ref('friendRequests/' + auth.currentUser.uid + '/' + fromUid).remove();
                alert('ì¹œêµ¬ ìš”ì²­ì„ ê±°ì ˆí–ˆìŠµë‹ˆë‹¤.');
                showFriendsPanel(); // ì¹œêµ¬ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
              }
            };
          });
        }, 100);
      }
      
      document.getElementById('formContainer').innerHTML = html;
      
      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
      setTimeout(() => {
        // ê²€ìƒ‰ ê¸°ëŠ¥
        const friendSearchInput = document.getElementById('friendSearchInput');
        if (friendSearchInput) {
          friendSearchInput.addEventListener('input', function() {
            const v = this.value.trim().toLowerCase();
            document.querySelectorAll('#myFriendsList li[data-nick]').forEach(function(li) {
              if (!v) {
                li.style.display = '';
              } else {
                const nick = li.getAttribute('data-nick').toLowerCase();
                li.style.display = nick.includes(v) ? '' : 'none';
              }
            });
          });
        }
        
        // ì¹œêµ¬ ì¶”ê°€ ë²„íŠ¼
        document.querySelectorAll('.addFriendBtn').forEach(function(btn) {
          btn.onclick = function() {
            const targetUid = btn.getAttribute('data-uid');
            
            if (myFriends[targetUid]) {
              alert('ì´ë¯¸ ì¹œêµ¬ì…ë‹ˆë‹¤.');
              return;
            }
            
            db.ref('friendRequests/' + targetUid + '/' + auth.currentUser.uid).once('value').then(function(snap) {
              if (snap.exists()) {
                alert('ì´ë¯¸ ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.');
                return;
              }
              
              db.ref('friendRequests/' + targetUid + '/' + auth.currentUser.uid).set({
                status: 'pending',
                requestedAt: Date.now(),
                requesterUid: auth.currentUser.uid
              }).then(() => {
                btn.disabled = true;
                btn.textContent = 'ìš”ì²­ë¨';
                btn.style.background = '#666';
                alert('ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤!');
              }).catch(error => {
                alert('ì¹œêµ¬ ìš”ì²­ ì „ì†¡ ì‹¤íŒ¨: ' + error.message);
              });
            });
          };
        });
        
        // ì¹œêµ¬ ì‚­ì œ ë²„íŠ¼
        document.querySelectorAll('.deleteFriendBtn').forEach(function(btn) {
          btn.onclick = function() {
            const fuid = btn.getAttribute('data-fuid');
            db.ref('users/' + auth.currentUser.uid + '/friends/' + fuid).remove();
            db.ref('users/' + fuid + '/friends/' + auth.currentUser.uid).remove();
            showFriendsPanel();
          };
        });
        
        // ì¹œêµ¬ ìš”ì²­ ìˆ˜ë½/ê±°ì ˆ ë²„íŠ¼
        document.querySelectorAll('.acceptFriendBtn').forEach(function(btn) {
          btn.onclick = function() {
            const fromUid = btn.getAttribute('data-fromuid');
            if (confirm('ì¹œêµ¬ ìš”ì²­ì„ ìˆ˜ë½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
              db.ref('users/' + auth.currentUser.uid + '/friends/' + fromUid).set(true);
              db.ref('users/' + fromUid + '/friends/' + auth.currentUser.uid).set(true);
              db.ref('friendRequests/' + auth.currentUser.uid + '/' + fromUid).remove();
              alert('ì¹œêµ¬ ìš”ì²­ì„ ìˆ˜ë½í–ˆìŠµë‹ˆë‹¤!');
              showFriendsPanel();
            }
          };
        });
        
        document.querySelectorAll('.rejectFriendBtn').forEach(function(btn) {
          btn.onclick = function() {
            const fromUid = btn.getAttribute('data-fromuid');
            if (confirm('ì¹œêµ¬ ìš”ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
              db.ref('friendRequests/' + auth.currentUser.uid + '/' + fromUid).remove();
              alert('ì¹œêµ¬ ìš”ì²­ì„ ê±°ì ˆí–ˆìŠµë‹ˆë‹¤.');
              showFriendsPanel();
            }
          };
        });
      }, 100);
      
    } catch (error) {
      console.error('ì¹œêµ¬ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
      document.getElementById('formContainer').innerHTML = '<div style="color:red">ì¹œêµ¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
    }
  };
  
  // í•¨ìˆ˜ í˜¸ì¶œ
  loadFriendsList();
}

// í”„ë¡œí•„(ë‚´ ì •ë³´) íŒ¨ë„
function showProfilePanel() {
  if (!auth.currentUser) {
    document.getElementById('formContainer').innerHTML = '<div style="color:red">' + getText('loginRequired') + '</div>';
    return;
  }
  const uid = auth.currentUser.uid;
  db.ref('users/' + uid).once('value').then(snap => {
    const user = snap.val() || {};
    let html = '<h2>' + getText('myProfile') + '</h2>';
    html += '<div style="background:#232428;padding:18px 22px;border-radius:10px;box-shadow:0 2px 8px #18191c;">';
    html += '<b>' + getText('robloxNicknameLabel') + ':</b> ' + (user.robloxNickname || getText('dash')) + '<br>';
    html += '<b>' + getText('joinDate') + ':</b> ' + (user.createdAt ? new Date(user.createdAt).toLocaleString() : getText('dash')) + '<br>';
    // ì¸ë²¤í† ë¦¬
    const inv = (user.inventory && Array.isArray(user.inventory)) ? user.inventory : [];
    html += '<b>' + getText('inventoryLabel') + ':</b> ' + (inv.length ? inv.join(', ') : getText('dash')) + '<br>';
    // í”„ë¦¬ë¯¸ì—„
    html += '<b>' + getText('premiumLabel') + ':</b> ' + (user.premium || getText('dash')) + '<br>';
    // ì„œë²„ ì •ë³´
    if (user.server) {
      html += '<b>' + getText('serverCreateStatus') + ':</b> ' + getText('yes') + '<br>';
      html += '<b>' + getText('serverCreateDateLabel') + ':</b> ' + (user.server.requestedAt ? new Date(user.server.requestedAt).toLocaleString() : getText('dash')) + '<br>';
    } else {
    html += '<b>' + getText('serverCreateStatus') + ':</b> ' + getText('no') + '<br>';
    html += '<b>' + getText('serverCreateDateLabel') + ':</b> ' + getText('dash') + '<br>';
    }
    html += '</div>';
    document.getElementById('formContainer').innerHTML = html;
  });
}

// ë¡œë¸”ë¡ìŠ¤ ë‹‰ë„¤ì„ì„ ì‚¬ì´ë“œë°”ì— í‘œì‹œ
function setSidebarNickname(nick) {
  var el = document.getElementById('sidebarNickname');
  if (el) {
    el.textContent = nick || 'ë‹‰ë„¤ì„';
  }
}

// Firebase ì„¤ì •
const firebaseConfig = {
  apiKey: "AIzaSyDKxcKXSmKF6LAEnFzF387ZN4wC8iRz8mg",
  authDomain: "rugged-night-396106.firebaseapp.com",
  databaseURL: "https://rugged-night-396106-default-rtdb.firebaseio.com",
  projectId: "rugged-night-396106",
  storageBucket: "rugged-night-396106.appspot.com",
  messagingSenderId: "388578786746",
  appId: "1:388578786746:web:c50051b71731c153f6b183",
  measurementId: "G-SRLCD2LZT8"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();
const ADMIN_UID = "VDDnepBDUtMqoVv4z2pxIAoolV93";

// Firebase Authentication ìƒíƒœ í™•ì¸
console.log('Firebase ì´ˆê¸°í™” ì™„ë£Œ');
console.log('Auth ê°ì²´:', auth);
console.log('Database ê°ì²´:', db);

// EmailJS ê´€ë ¨ ì½”ë“œ ì‚­ì œë¨



// ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥ ì‚­ì œë¨

// ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
function logout() {
  if (confirm('ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    auth.signOut().then(() => {
      console.log('ë¡œê·¸ì•„ì›ƒ ì„±ê³µ');
      showHomePanel(); // í™ˆ íŒ¨ë„ ìƒˆë¡œê³ ì¹¨ (ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ë³€ê²½ë¨)
    }).catch(error => {
      console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
      showMessage('ë¡œê·¸ì•„ì›ƒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
    });
  }
}

// ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜ (alert ëŒ€ì‹  í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ)
function showMessage(message, type = 'info') {
  const messageContainer = document.getElementById('messageContainer') || createMessageContainer();
  const messageDiv = document.createElement('div');
  
  let bgColor = '#4caf50'; // ê¸°ë³¸: ì„±ê³µ (ì´ˆë¡)
  if (type === 'error') bgColor = '#f44336'; // ì˜¤ë¥˜ (ë¹¨ê°•)
  if (type === 'warning') bgColor = '#ff9800'; // ê²½ê³  (ì£¼í™©)
  if (type === 'info') bgColor = '#2196f3'; // ì •ë³´ (íŒŒë‘)
  
  messageDiv.style.cssText = `
    background: ${bgColor};
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    margin: 10px 0;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    animation: slideIn 0.3s ease-out;
  `;
  messageDiv.textContent = message;
  
  messageContainer.appendChild(messageDiv);
  
  // 5ì´ˆ í›„ ìë™ ì œê±°
  setTimeout(() => {
    if (messageDiv.parentNode) {
      messageDiv.style.animation = 'slideOut 0.3s ease-in';
      setTimeout(() => {
        if (messageDiv.parentNode) {
          messageDiv.parentNode.removeChild(messageDiv);
        }
      }, 300);
    }
  }, 5000);
}

// ë©”ì‹œì§€ ì»¨í…Œì´ë„ˆ ìƒì„±
function createMessageContainer() {
  const container = document.createElement('div');
  container.id = 'messageContainer';
  container.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    max-width: 400px;
  `;
  document.body.appendChild(container);
  return container;
}

    // í™ˆ íŒ¨ë„ í•¨ìˆ˜
    function showHomePanel() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = 
          '<h2>HJNF ' + getText('serverManagement') + '</h2>' +
          '<p>' + getText('robloxServerManagement') + '</p>' +
          '<div id="loginButtons" style="margin-top: 20px;">' +
          '<button id="showLogin" onclick="showLoginForm()">' + getText('login') + '</button>' +
          '<button id="showSignup" onclick="showSignupForm()">' + getText('signup') + '</button>' +
          '</div>';
        return;
      }
      
  db.ref('users/' + auth.currentUser.uid).once('value').then(snap => {
    const user = snap.val() || {};
    let html = '<h2>' + getText('home') + '</h2>';
    html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
    html += '<h3>' + getText('welcome') + ', ' + (user.robloxNickname || getText('user')) + 'ë‹˜!</h3>';
    html += '<p>' + getText('startServerManagement') + '</p>';
    html += '<p style="color:#ffd700;font-weight:600;margin-top:10px;">ğŸ’¡ HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ë³´ì„¸ìš”!</p>';
    html += '<button onclick="logout()" style="margin-top:15px;padding:8px 16px;background:#f44336;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:600;">ë¡œê·¸ì•„ì›ƒ</button>';
    html += '</div>';
    
    // ì„œë²„ ìƒíƒœ í‘œì‹œ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ìš© ì»¨í…Œì´ë„ˆ)
    html += '<div id="serverStatusContainer" style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
    html += '<h3>' + getText('myServerStatus') + '</h3>';
    html += '<div id="serverStatusContent">' + getText('loading') + '...</div>';
    html += '</div>';
    
    // í”„ë¦¬ë¯¸ì—„ ìƒíƒœ í‘œì‹œ
        html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
        html += '<h3>' + getText('premiumStatus') + '</h3>';
        html += '<p><strong>' + getText('grade') + ':</strong> ' + (user.premium || getText('none')) + '</p>';
        html += '</div>';
    
    // ì¹œêµ¬ ìš”ì²­ ì•Œë¦¼ í‘œì‹œ
    html += '<div id="friendRequestNotifications" style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
    html += '<h3>' + getText('friendRequestNotifications') + '</h3>';
    html += '<div id="pendingFriendRequests">' + getText('loading') + '...</div>';
    html += '</div>';
    
    // ì„œë²„ ì†Œìœ ììš© ë©¤ë²„ ê´€ë¦¬ íŒ¨ë„
    if (user.server && user.server.status === 'approved') {
      html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-top:20px;">';
      html += '<h3>ë‚´ ì„œë²„ ë©¤ë²„ ê´€ë¦¬</h3>';
      html += '<p>ì„œë²„ ì°¸ì—¬ ì‹ ì²­ ìŠ¹ì¸ ë° ë©¤ë²„ ê´€ë¦¬</p>';
      html += '<button onclick="showServerMemberManagement()" style="margin-top:10px;padding:10px 20px;background:#4caf50;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ë©¤ë²„ ê´€ë¦¬</button>';
      html += '</div>';
    }
    
    // ê´€ë¦¬ììš© ì„œë²„ ê´€ë¦¬ íŒ¨ë„
    if (auth.currentUser.uid === ADMIN_UID) {
      html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-top:20px;">';
      html += '<h3>ê´€ë¦¬ì ì„œë²„ ê´€ë¦¬</h3>';
      html += '<p>ì„œë²„ ìŠ¹ì¸/ê±°ì ˆ ë° ê´€ë¦¬ ê¸°ëŠ¥</p>';
      html += '<button onclick="showAdminServerManagement()" style="margin-top:10px;padding:10px 20px;background:#ff9800;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì„œë²„ ê´€ë¦¬</button>';
      html += '</div>';
      
      // ì‹¤ì‹œê°„ ì„œë²„ ìš”ì²­ ì•Œë¦¼ í‘œì‹œ
      html += '<div id="serverRequestNotifications" style="background:#232428;padding:20px;border-radius:10px;margin-top:20px;">';
      html += '<h3>ì„œë²„ ìš”ì²­ ì•Œë¦¼</h3>';
      html += '<div id="pendingRequestsList">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
      html += '</div>';
      
      // ì‚¬ì´íŠ¸ ê´€ë¦¬ììš© ì°¸ì—¬ ìŠ¹ì¸ ì•Œë¦¼
      html += '<div id="joinApprovalNotifications" style="background:#232428;padding:20px;border-radius:10px;margin-top:20px;">';
      html += '<h3>ì°¸ì—¬ ìŠ¹ì¸ ì•Œë¦¼</h3>';
      html += '<div id="pendingJoinApprovals">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
      html += '</div>';
      
      // ì‚¬ì´íŠ¸ ê´€ë¦¬ììš© ì¶”ë°© ìŠ¹ì¸ ì•Œë¦¼
      html += '<div id="kickApprovalNotifications" style="background:#232428;padding:20px;border-radius:10px;margin-top:20px;">';
      html += '<h3>ì¶”ë°© ìŠ¹ì¸ ì•Œë¦¼</h3>';
      html += '<div id="pendingKickApprovals">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
      html += '</div>';
    }
        
        document.getElementById('formContainer').innerHTML = html;
        
        // ê´€ë¦¬ìì¸ ê²½ìš° ì‹¤ì‹œê°„ ì„œë²„ ìš”ì²­ ì•Œë¦¼ í‘œì‹œ
        if (auth.currentUser.uid === ADMIN_UID) {
          showRealtimeServerRequests();
          showRealtimeJoinApprovals();
          showRealtimeKickApprovals();
        }
        
        // ì„œë²„ ì†Œìœ ìì¸ ê²½ìš° ë©¤ë²„ ê´€ë¦¬ ì•Œë¦¼ í‘œì‹œ
        if (user.server && user.server.status === 'approved') {
          showRealtimeJoinRequests();
        }
        
        // ì‹¤ì‹œê°„ ì„œë²„ ìƒíƒœ ì—…ë°ì´íŠ¸
        showRealtimeServerStatus();
        
        // ì‹¤ì‹œê°„ ì¹œêµ¬ ìš”ì²­ ì•Œë¦¼ í‘œì‹œ
        showRealtimeFriendRequests();
      });
    }

    // ì‹¤ì‹œê°„ ì¹œêµ¬ ìš”ì²­ ì•Œë¦¼ í‘œì‹œ
    function showRealtimeFriendRequests() {
      if (!auth.currentUser) return;
      
      db.ref('friendRequests/' + auth.currentUser.uid).on('value', function(snap) {
        const requests = snap.val() || {};
        const pendingRequests = Object.keys(requests).filter(uid => requests[uid].status === 'pending');
        const container = document.getElementById('pendingFriendRequests');
        
        if (!container) return;
        
        if (pendingRequests.length === 0) {
          container.innerHTML = '<p style="color:#888;">ëŒ€ê¸°ì¤‘ì¸ ì¹œêµ¬ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        } else {
          let html = '<div style="background:#ff9800;padding:15px;border-radius:8px;margin-bottom:10px;">';
          html += '<p><strong>' + pendingRequests.length + 'ê°œì˜ ì¹œêµ¬ ìš”ì²­ì´ ìˆìŠµë‹ˆë‹¤!</strong></p>';
          html += '<p style="font-size:14px;color:#fff;">ì¹œêµ¬ íŒ¨ë„ì—ì„œ í™•ì¸í•˜ê³  ìˆ˜ë½í•˜ì„¸ìš”.</p>';
          html += '<button onclick="showFriendsPanel()" style="margin-top:10px;padding:8px 16px;background:#fff;color:#ff9800;border:none;border-radius:4px;cursor:pointer;font-weight:600;">ì¹œêµ¬ ìš”ì²­ í™•ì¸</button>';
          html += '</div>';
          container.innerHTML = html;
        }
      });
    }

    // ì‹¤ì‹œê°„ ì„œë²„ ìƒíƒœ ì—…ë°ì´íŠ¸
    function showRealtimeServerStatus() {
      if (!auth.currentUser) return;
      
      db.ref('users/' + auth.currentUser.uid + '/server').on('value', function(snap) {
        const server = snap.val();
        const container = document.getElementById('serverStatusContent');
        if (!container) return;
        
        if (server) {
          let statusKor = '';
          switch (server.status) {
            case 'pending': statusKor = 'ëŒ€ê¸°ì¤‘'; break;
            case 'approved': statusKor = 'ìš´ì˜ì¤‘'; break;
            case 'stopped': statusKor = 'ì •ì§€ë¨'; break;
            case 'paused': statusKor = 'ì¼ì‹œì •ì§€'; break;
            case 'rejected': statusKor = 'ê±°ì ˆë¨'; break;
            default: statusKor = server.status;
          }
          
          let html = '<p><strong>ìƒíƒœ:</strong> ' + statusKor + '</p>';
          html += '<p><strong>ìƒì„±ì¼:</strong> ' + (server.requestedAt ? new Date(server.requestedAt).toLocaleString() : '-') + '</p>';
          if (server.url) {
            html += '<p><strong>ì„œë²„ ì£¼ì†Œ:</strong> <a href="' + server.url + '" target="_blank" style="color:#2196f3;">' + server.url + '</a></p>';
          }
          
          // ìƒíƒœë³„ ë©”ì‹œì§€
          if (server.status === 'pending') {
            html += '<div style="background:#ff9800;padding:15px;border-radius:10px;margin-top:15px;">';
            html += '<p><strong>ì„œë²„ ìƒì„± ìš”ì²­ì´ ëŒ€ê¸°ì¤‘ì…ë‹ˆë‹¤.</strong></p>';
            html += '<p>ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>';
            html += '</div>';
          } else if (server.status === 'approved') {
            html += '<div style="background:#4caf50;padding:15px;border-radius:10px;margin-top:15px;">';
            html += '<p><strong>ì„œë²„ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!</strong></p>';
            html += '<p>ì„œë²„ë¥¼ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
            html += '<p style="color:#fff;font-weight:600;margin-top:10px;">ğŸ’¡ HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!</p>';
            html += '</div>';
          } else if (server.status === 'paused') {
            html += '<div style="background:#ff9800;padding:15px;border-radius:10px;margin-top:15px;">';
            html += '<p><strong>ì„œë²„ê°€ ì¼ì‹œì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.</strong></p>';
            html += '<p>ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
            html += '<button onclick="resumeServer()" style="margin-top:10px;padding:10px 20px;background:#4caf50;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì„œë²„ ì¬ê°œ</button>';
            html += '</div>';
          } else if (server.status === 'stopped') {
            html += '<div style="background:#f44336;padding:15px;border-radius:10px;margin-top:15px;">';
            html += '<p><strong>ì„œë²„ê°€ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.</strong></p>';
            html += '<p>ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.</p>';
            html += '</div>';
          } else if (server.status === 'rejected') {
            html += '<div style="background:#f44336;padding:15px;border-radius:10px;margin-top:15px;">';
            html += '<p><strong>ì„œë²„ ìš”ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.</strong></p>';
            html += '<p>ë‹¤ì‹œ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
            html += '<button onclick="showServerRequestForm()" style="margin-top:10px;padding:10px 20px;background:#d32c2c;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì„œë²„ ì¬ìš”ì²­</button>';
            html += '</div>';
          }
          
          container.innerHTML = html;
        } else {
          container.innerHTML = '<p>ì•„ì§ ì„œë²„ê°€ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ë¥¼ ìƒì„±í•´ë³´ì„¸ìš”!</p>' +
            '<button onclick="showServerRequestForm()" style="margin-top:10px;padding:10px 20px;background:#d32c2c;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì„œë²„ ìƒì„± ìš”ì²­</button>';
        }
      });
    }

    // ì‹¤ì‹œê°„ ì„œë²„ ìš”ì²­ ì•Œë¦¼ í‘œì‹œ
    function showRealtimeServerRequests() {
      db.ref('users').orderByChild('server/status').equalTo('pending').on('value', function(snap) {
        const users = snap.val() || {};
        let html = '';
        
        for (const uid in users) {
          const user = users[uid];
          if (user.server && user.server.status === 'pending') {
            html += '<div style="background:#ff9800;padding:15px;border-radius:8px;margin-bottom:10px;">';
            html += '<p><strong>' + (user.robloxNickname || 'ìµëª…') + 'ë‹˜</strong>ì´ ì„œë²„ ìƒì„±ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.</p>';
            html += '<p style="font-size:12px;color:#ccc;">ìš”ì²­ ì‹œê°„: ' + (user.server.requestedAt ? new Date(user.server.requestedAt).toLocaleString() : '-') + '</p>';
            html += '<div style="margin-top:10px;">';
            html += '<input type="text" id="serverUrl-' + uid + '" placeholder="ì„œë²„ URL ì…ë ¥" style="width:200px;padding:5px;margin-right:10px;border-radius:4px;border:1px solid #333;background:#18191c;color:#fff;">';
            html += '<button onclick="approveServerRequest(\'' + uid + '\')" style="padding:5px 15px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;">ìŠ¹ì¸</button>';
            html += '<button onclick="rejectServerRequest(\'' + uid + '\')" style="padding:5px 15px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;">ê±°ì ˆ</button>';
            html += '</div>';
            html += '</div>';
          }
        }
        
        if (!html) {
          html = '<p style="color:#ccc;">ëŒ€ê¸°ì¤‘ì¸ ì„œë²„ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        const container = document.getElementById('pendingRequestsList');
        if (container) {
          container.innerHTML = html;
        }
      });
    }

    // ì„œë²„ ìš”ì²­ ìŠ¹ì¸
    function approveServerRequest(uid) {
      const serverUrl = document.getElementById('serverUrl-' + uid).value.trim();
      if (!serverUrl) {
        alert('ì„œë²„ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (confirm('ì„œë²„ ìš”ì²­ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('users/' + uid + '/server').update({
          status: 'approved',
          url: serverUrl,
          approvedAt: Date.now()
        }).then(() => {
          alert('ì„œë²„ ìš”ì²­ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
        });
      }
    }

    // ì„œë²„ ìš”ì²­ ê±°ì ˆ
    function rejectServerRequest(uid) {
      if (confirm('ì„œë²„ ìš”ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('users/' + uid + '/server').update({
          status: 'rejected',
          rejectedAt: Date.now()
        }).then(() => {
          showMessage('ì„œë²„ ìš”ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.', 'warning');
        });
      }
    }

    // ì„œë²„ ì†Œìœ ììš© ë©¤ë²„ ê´€ë¦¬ íŒ¨ë„
    function showServerMemberManagement() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      let html = '<h2>ì„œë²„ ë©¤ë²„ ê´€ë¦¬</h2>';
      html += '<div id="joinRequestsContainer" style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
      html += '<h3>ì°¸ì—¬ ì‹ ì²­ ëª©ë¡</h3>';
      html += '<div id="joinRequestsList">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
      html += '</div>';
      
      html += '<div id="serverMembersContainer" style="background:#232428;padding:20px;border-radius:10px;">';
      html += '<h3>ì„œë²„ ë©¤ë²„ ëª©ë¡</h3>';
      html += '<div id="serverMembersList">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
      html += '</div>';
      
      document.getElementById('formContainer').innerHTML = html;
      
      // ì‹¤ì‹œê°„ ì°¸ì—¬ ì‹ ì²­ ë° ë©¤ë²„ ëª©ë¡ í‘œì‹œ
      showRealtimeJoinRequests();
      showRealtimeServerMembers();
    }

    // ì‹¤ì‹œê°„ ì°¸ì—¬ ì‹ ì²­ í‘œì‹œ
    function showRealtimeJoinRequests() {
      if (!auth.currentUser) return;
      
      db.ref('serverJoinRequests/' + auth.currentUser.uid).on('value', function(snap) {
        const requests = snap.val() || {};
        let html = '';
        
        for (const requesterUid in requests) {
          const request = requests[requesterUid];
          if (request.status === 'pending') {
            db.ref('users/' + requesterUid + '/robloxNickname').once('value').then(nickSnap => {
              const nickname = nickSnap.val() || 'ìµëª…';
              html += '<div style="background:#ff9800;padding:15px;border-radius:8px;margin-bottom:10px;">';
              html += '<p><strong>' + nickname + 'ë‹˜</strong>ì´ ì„œë²„ ì°¸ì—¬ë¥¼ ì‹ ì²­í–ˆìŠµë‹ˆë‹¤.</p>';
              html += '<p style="font-size:12px;color:#ccc;">ì‹ ì²­ ì‹œê°„: ' + (request.requestedAt ? new Date(request.requestedAt).toLocaleString() : '-') + '</p>';
              html += '<div style="margin-top:10px;">';
              html += '<button onclick="approveJoinRequest(\'' + requesterUid + '\')" style="padding:5px 15px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;">ìŠ¹ì¸</button>';
              html += '<button onclick="rejectJoinRequest(\'' + requesterUid + '\')" style="padding:5px 15px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;">ê±°ì ˆ</button>';
              html += '</div>';
              html += '</div>';
              
              const container = document.getElementById('joinRequestsList');
              if (container) {
                container.innerHTML = html;
              }
            });
          }
        }
        
        if (!html) {
          html = '<p style="color:#ccc;">ëŒ€ê¸°ì¤‘ì¸ ì°¸ì—¬ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
          const container = document.getElementById('joinRequestsList');
          if (container) {
            container.innerHTML = html;
          }
        }
      });
    }

    // ì°¸ì—¬ ì‹ ì²­ ìŠ¹ì¸
    function approveJoinRequest(requesterUid) {
      if (confirm('ì°¸ì—¬ ì‹ ì²­ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // 1ë‹¨ê³„: ì„œë²„ ì†Œìœ ì ìŠ¹ì¸
        db.ref('serverJoinRequests/' + auth.currentUser.uid + '/' + requesterUid).update({
          status: 'approved',
          approvedAt: Date.now()
        }).then(() => {
          // 2ë‹¨ê³„: ì‚¬ì´íŠ¸ ê´€ë¦¬ì ìŠ¹ì¸ ìš”ì²­
          db.ref('serverJoinApprovals/' + auth.currentUser.uid + '/' + requesterUid).set({
            status: 'pending',
            requestedAt: Date.now(),
            serverOwnerUid: auth.currentUser.uid,
            requesterUid: requesterUid
          }).then(() => {
            alert('ì°¸ì—¬ ì‹ ì²­ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ì´íŠ¸ ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.');
          });
        });
      }
    }

    // ì°¸ì—¬ ì‹ ì²­ ê±°ì ˆ
    function rejectJoinRequest(requesterUid) {
      if (confirm('ì°¸ì—¬ ì‹ ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('serverJoinRequests/' + auth.currentUser.uid + '/' + requesterUid).update({
          status: 'rejected',
          rejectedAt: Date.now()
        }).then(() => {
          alert('ì°¸ì—¬ ì‹ ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
        });
      }
    }

    // ì‹¤ì‹œê°„ ì„œë²„ ë©¤ë²„ ëª©ë¡ í‘œì‹œ
    function showRealtimeServerMembers() {
      if (!auth.currentUser) return;
      
      db.ref('serverMembers/' + auth.currentUser.uid).on('value', function(snap) {
        const members = snap.val() || {};
        let html = '';
        
        for (const memberUid in members) {
          const member = members[memberUid];
          if (member.status === 'approved') {
            db.ref('users/' + memberUid + '/robloxNickname').once('value').then(nickSnap => {
              const nickname = nickSnap.val() || 'ìµëª…';
              html += '<div style="background:#4caf50;padding:15px;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;">';
              html += '<div>';
              html += '<p><strong>' + nickname + '</strong></p>';
              html += '<p style="font-size:12px;color:#ccc;">ê°€ì…ì¼: ' + (member.joinedAt ? new Date(member.joinedAt).toLocaleString() : '-') + '</p>';
              html += '</div>';
              html += '<button onclick="kickServerMember(\'' + memberUid + '\')" style="padding:5px 15px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;">ì¶”ë°©</button>';
              html += '</div>';
              
              const container = document.getElementById('serverMembersList');
              if (container) {
                container.innerHTML = html;
              }
            });
          }
        }
        
        if (!html) {
          html = '<p style="color:#ccc;">ì„œë²„ ë©¤ë²„ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
          const container = document.getElementById('serverMembersList');
          if (container) {
            container.innerHTML = html;
          }
        }
      });
    }

    // ì„œë²„ ë©¤ë²„ ì¶”ë°©
    function kickServerMember(memberUid) {
      if (confirm('ì´ ë©¤ë²„ë¥¼ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // ì¶”ë°© ìš”ì²­ì„ ì‚¬ì´íŠ¸ ê´€ë¦¬ìì—ê²Œ ì „ì†¡
        db.ref('kickRequests/' + auth.currentUser.uid + '/' + memberUid).set({
          status: 'pending',
          requestedAt: Date.now(),
          serverOwnerUid: auth.currentUser.uid,
          memberUid: memberUid
        }).then(() => {
          alert('ì¶”ë°© ìš”ì²­ì´ ì‚¬ì´íŠ¸ ê´€ë¦¬ìì—ê²Œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
        });
      }
    }

    // ì‚¬ì´íŠ¸ ê´€ë¦¬ììš© ì°¸ì—¬ ìŠ¹ì¸ ì•Œë¦¼ í‘œì‹œ
    function showRealtimeJoinApprovals() {
      if (!auth.currentUser || auth.currentUser.uid !== ADMIN_UID) return;
      
      db.ref('serverJoinApprovals').on('value', function(snap) {
        const approvals = snap.val() || {};
        let html = '';
        
        for (const serverOwnerUid in approvals) {
          const serverApprovals = approvals[serverOwnerUid];
          for (const requesterUid in serverApprovals) {
            const approval = serverApprovals[requesterUid];
            if (approval.status === 'pending') {
              // ì„œë²„ ì†Œìœ ìì™€ ì‹ ì²­ì ë‹‰ë„¤ì„ ê°€ì ¸ì˜¤ê¸°
              Promise.all([
                db.ref('users/' + serverOwnerUid + '/robloxNickname').once('value'),
                db.ref('users/' + requesterUid + '/robloxNickname').once('value')
              ]).then(([ownerSnap, requesterSnap]) => {
                const ownerNick = ownerSnap.val() || 'ìµëª…';
                const requesterNick = requesterSnap.val() || 'ìµëª…';
                
                html += '<div style="background:#2196f3;padding:15px;border-radius:8px;margin-bottom:10px;">';
                html += '<p><strong>' + requesterNick + 'ë‹˜</strong>ì´ <strong>' + ownerNick + 'ë‹˜</strong>ì˜ ì„œë²„ ì°¸ì—¬ë¥¼ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.</p>';
                html += '<p style="font-size:12px;color:#ccc;">ìš”ì²­ ì‹œê°„: ' + (approval.requestedAt ? new Date(approval.requestedAt).toLocaleString() : '-') + '</p>';
                html += '<div style="margin-top:10px;">';
                html += '<button onclick="approveJoinApproval(\'' + serverOwnerUid + '\', \'' + requesterUid + '\')" style="padding:5px 15px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;">ìŠ¹ì¸</button>';
                html += '<button onclick="rejectJoinApproval(\'' + serverOwnerUid + '\', \'' + requesterUid + '\')" style="padding:5px 15px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;">ê±°ì ˆ</button>';
                html += '</div>';
                html += '</div>';
                
                const container = document.getElementById('pendingJoinApprovals');
                if (container) {
                  container.innerHTML = html;
                }
              });
            }
          }
        }
        
        if (!html) {
          html = '<p style="color:#ccc;">ëŒ€ê¸°ì¤‘ì¸ ì°¸ì—¬ ìŠ¹ì¸ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
          const container = document.getElementById('pendingJoinApprovals');
          if (container) {
            container.innerHTML = html;
          }
        }
      });
    }

    // ì°¸ì—¬ ìŠ¹ì¸ ìŠ¹ì¸
    function approveJoinApproval(serverOwnerUid, requesterUid) {
      if (confirm('ì°¸ì—¬ ìŠ¹ì¸ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // ì‚¬ì´íŠ¸ ê´€ë¦¬ì ìŠ¹ì¸
        db.ref('serverJoinApprovals/' + serverOwnerUid + '/' + requesterUid).update({
          status: 'approved',
          approvedAt: Date.now()
        }).then(() => {
          // ì„œë²„ ë©¤ë²„ë¡œ ì¶”ê°€
          db.ref('serverMembers/' + serverOwnerUid + '/' + requesterUid).set({
            status: 'approved',
            joinedAt: Date.now()
          }).then(() => {
            alert('ì°¸ì—¬ ìŠ¹ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
          });
        });
      }
    }

    // ì°¸ì—¬ ìŠ¹ì¸ ê±°ì ˆ
    function rejectJoinApproval(serverOwnerUid, requesterUid) {
      if (confirm('ì°¸ì—¬ ìŠ¹ì¸ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('serverJoinApprovals/' + serverOwnerUid + '/' + requesterUid).update({
          status: 'rejected',
          rejectedAt: Date.now()
        }).then(() => {
          alert('ì°¸ì—¬ ìŠ¹ì¸ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
        });
      }
    }

    // ì‚¬ì´íŠ¸ ê´€ë¦¬ììš© ì¶”ë°© ìŠ¹ì¸ ì•Œë¦¼ í‘œì‹œ
    function showRealtimeKickApprovals() {
      if (!auth.currentUser || auth.currentUser.uid !== ADMIN_UID) return;
      
      db.ref('kickRequests').on('value', function(snap) {
        const kickRequests = snap.val() || {};
        let html = '';
        
        for (const serverOwnerUid in kickRequests) {
          const serverKicks = kickRequests[serverOwnerUid];
          for (const memberUid in serverKicks) {
            const kickRequest = serverKicks[memberUid];
            if (kickRequest.status === 'pending') {
              // ì„œë²„ ì†Œìœ ìì™€ ë©¤ë²„ ë‹‰ë„¤ì„ ê°€ì ¸ì˜¤ê¸°
              Promise.all([
                db.ref('users/' + serverOwnerUid + '/robloxNickname').once('value'),
                db.ref('users/' + memberUid + '/robloxNickname').once('value')
              ]).then(([ownerSnap, memberSnap]) => {
                const ownerNick = ownerSnap.val() || 'ìµëª…';
                const memberNick = memberSnap.val() || 'ìµëª…';
                
                html += '<div style="background:#f44336;padding:15px;border-radius:8px;margin-bottom:10px;">';
                html += '<p><strong>' + ownerNick + 'ë‹˜</strong>ì´ <strong>' + memberNick + 'ë‹˜</strong>ì˜ ì¶”ë°©ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.</p>';
                html += '<p style="font-size:12px;color:#ccc;">ìš”ì²­ ì‹œê°„: ' + (kickRequest.requestedAt ? new Date(kickRequest.requestedAt).toLocaleString() : '-') + '</p>';
                html += '<div style="margin-top:10px;">';
                html += '<button onclick="approveKickRequest(\'' + serverOwnerUid + '\', \'' + memberUid + '\')" style="padding:5px 15px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;">ì¶”ë°© ìŠ¹ì¸</button>';
                html += '<button onclick="rejectKickRequest(\'' + serverOwnerUid + '\', \'' + memberUid + '\')" style="padding:5px 15px;background:#666;color:#fff;border:none;border-radius:4px;cursor:pointer;">ê±°ì ˆ</button>';
                html += '</div>';
                html += '</div>';
                
                const container = document.getElementById('pendingKickApprovals');
                if (container) {
                  container.innerHTML = html;
                }
              });
            }
          }
        }
        
        if (!html) {
          html = '<p style="color:#ccc;">ëŒ€ê¸°ì¤‘ì¸ ì¶”ë°© ìŠ¹ì¸ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
          const container = document.getElementById('pendingKickApprovals');
          if (container) {
            container.innerHTML = html;
          }
        }
      });
    }

    // ì¶”ë°© ìŠ¹ì¸
    function approveKickRequest(serverOwnerUid, memberUid) {
      if (confirm('ì¶”ë°©ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // ì¶”ë°© ìŠ¹ì¸
        db.ref('kickRequests/' + serverOwnerUid + '/' + memberUid).update({
          status: 'approved',
          approvedAt: Date.now()
        }).then(() => {
          // ì„œë²„ ë©¤ë²„ì—ì„œ ì œê±°
          db.ref('serverMembers/' + serverOwnerUid + '/' + memberUid).remove().then(() => {
            alert('ì¶”ë°©ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
          });
        });
      }
    }

    // ì¶”ë°© ê±°ì ˆ
    function rejectKickRequest(serverOwnerUid, memberUid) {
      if (confirm('ì¶”ë°©ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('kickRequests/' + serverOwnerUid + '/' + memberUid).update({
          status: 'rejected',
          rejectedAt: Date.now()
        }).then(() => {
          alert('ì¶”ë°©ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
        });
      }
    }

    // ë¡œê·¸ì¸ í•¨ìˆ˜
    function showLoginForm() {
      const html = 
        '<h2>' + getText('login') + '</h2>' +
        '<form id="loginForm">' +
        '<input type="email" id="loginEmail" placeholder="' + getText('email') + '" required>' +
        '<input type="password" id="loginPassword" placeholder="' + getText('password') + '" required>' +
        '<button type="submit">' + getText('login') + '</button>' +
        '</form>';
      openModal(html);
      
      document.getElementById('loginForm').onsubmit = function(e) {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        
        console.log('ë¡œê·¸ì¸ ì‹œë„:', email);
        
        auth.signInWithEmailAndPassword(email, password)
          .then(() => {
            console.log('ë¡œê·¸ì¸ ì„±ê³µ');
            closeModal();
            // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ìë™ìœ¼ë¡œ í™ˆìœ¼ë¡œ ì´ë™
            setTimeout(() => {
              showHomePanel();
            }, 100);
          })
          .catch(error => {
            console.error('ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
            console.error('ì˜¤ë¥˜ ì½”ë“œ:', error.code);
            console.error('ì˜¤ë¥˜ ë©”ì‹œì§€:', error.message);
            
            // ì‚¬ìš©ì ì¹œí™”ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€
            let errorMessage = '';
            switch(error.code) {
              case 'auth/user-not-found':
                errorMessage = 'ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ ì£¼ì†Œì…ë‹ˆë‹¤.\níšŒì›ê°€ì…ì„ ë¨¼ì € ì§„í–‰í•´ì£¼ì„¸ìš”.';
                break;
              case 'auth/wrong-password':
                errorMessage = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\në‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.';
                break;
              case 'auth/invalid-email':
                errorMessage = 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                break;
              case 'auth/too-many-requests':
                errorMessage = 'ë„ˆë¬´ ë§ì€ ë¡œê·¸ì¸ ì‹œë„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\nì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                break;
              default:
                errorMessage = getText('login') + ' ì‹¤íŒ¨: ' + error.message;
            }
            
            showMessage(errorMessage, 'error');
          });
      };
    }

    // íšŒì›ê°€ì… í•¨ìˆ˜
    function showSignupForm() {
      const html = 
        '<h2>' + getText('signup') + '</h2>' +
        '<form id="signupForm">' +
        '<input type="email" id="signupEmail" placeholder="' + getText('email') + '" required>' +
        '<input type="password" id="signupPassword" placeholder="' + getText('password') + '" required>' +
        '<input type="password" id="confirmPassword" placeholder="' + getText('confirmPassword') + '" required>' +
        '<input type="text" id="robloxNickname" placeholder="' + getText('robloxNickname') + '" required>' +
        '<button type="submit" id="signupBtn">' + getText('signup') + '</button>' +
        '</form>';
      openModal(html);
      
      // ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥ ì‚­ì œë¨
      
      document.getElementById('signupForm').onsubmit = function(e) {
        e.preventDefault();
        const email = document.getElementById('signupEmail').value;
        const password = document.getElementById('signupPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const nickname = document.getElementById('robloxNickname').value;
        
        if (password !== confirmPassword) {
          showMessage(getText('password') + 'ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
          return;
        }
        
        console.log('íšŒì›ê°€ì… ì‹œë„:', email);
        
        auth.createUserWithEmailAndPassword(email, password)
          .then(userCredential => {
            console.log('Firebase ì‚¬ìš©ì ìƒì„± ì„±ê³µ:', userCredential.user.uid);
            const user = userCredential.user;
            return db.ref('users/' + user.uid).set({
              email: email,
              robloxNickname: nickname,
              createdAt: Date.now(),
              emailVerified: true
            });
          })
          .then(() => {
            console.log('ì‚¬ìš©ì ë°ì´í„° ì €ì¥ ì„±ê³µ');
            closeModal();
            // íšŒì›ê°€ì… ì„±ê³µ ì‹œ ìë™ìœ¼ë¡œ í™ˆìœ¼ë¡œ ì´ë™
            setTimeout(() => {
              showHomePanel();
            }, 100);
          })
          .catch(error => {
            console.error('íšŒì›ê°€ì… ì˜¤ë¥˜:', error);
            console.error('ì˜¤ë¥˜ ì½”ë“œ:', error.code);
            console.error('ì˜¤ë¥˜ ë©”ì‹œì§€:', error.message);
            
            // ì‚¬ìš©ì ì¹œí™”ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€
            let errorMessage = '';
            switch(error.code) {
              case 'auth/email-already-in-use':
                errorMessage = 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ ì£¼ì†Œì…ë‹ˆë‹¤.\në¡œê·¸ì¸ì„ ì‹œë„í•´ë³´ì„¸ìš”.';
                break;
              case 'auth/weak-password':
                errorMessage = 'ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤.\n6ìë¦¬ ì´ìƒì˜ ê°•í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.';
                break;
              case 'auth/invalid-email':
                errorMessage = 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                break;
              default:
                errorMessage = getText('signup') + ' ì‹¤íŒ¨: ' + error.message;
            }
            
            showMessage(errorMessage, 'error');
          });
      };
    }

    // ì„œë²„ ì¬ê°œ í•¨ìˆ˜
    function resumeServer() {
      if (!auth.currentUser) {
        alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
      }
      
      if (confirm('ì„œë²„ë¥¼ ì¬ê°œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('users/' + auth.currentUser.uid + '/server/status').set('approved').then(() => {
          alert('ì„œë²„ê°€ ì¬ê°œë˜ì—ˆìŠµë‹ˆë‹¤.');
          showHomePanel(); // í™ˆ íŒ¨ë„ ìƒˆë¡œê³ ì¹¨
        }).catch(error => {
          alert('ì„œë²„ ì¬ê°œ ì‹¤íŒ¨: ' + error.message);
        });
      }
    }

    // ì„œë²„ ìƒì„± ìš”ì²­ í¼ (ê°„ì†Œí™”)
    function showServerRequestForm() {
      if (!auth.currentUser) {
        alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
      }
      
      // ì»¤ìŠ¤í…€ ê²½ê³ ì°½ í‘œì‹œ
      showServerRequestWarning();
    }

    // ì„œë²„ ìš”ì²­ ê²½ê³ ì°½
    function showServerRequestWarning() {
      const warningHtml = 
        '<div style="text-align: center; padding: 20px;">' +
        '<div style="font-size: 24px; margin-bottom: 20px;">âš ï¸</div>' +
        '<h2 style="color: #ff6b6b; margin-bottom: 15px;">ì„œë²„ ìƒì„± ì „ í•„ìˆ˜ì‚¬í•­</h2>' +
        '<div style="background: #fff3cd; border: 2px solid #ffeaa7; border-radius: 10px; padding: 15px; margin: 20px 0;">' +
        '<p style="color: #856404; font-weight: bold; font-size: 16px; margin: 0;">HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!</p>' +
        '</div>' +
        '<div style="background: #f8d7da; border: 2px solid #f5c6cb; border-radius: 10px; padding: 15px; margin: 20px 0;">' +
        '<p style="color: #721c24; font-weight: bold; font-size: 16px; margin: 0;">ì¹œêµ¬ì¶”ê°€ ì—†ì´ ì„œë²„ìš”ì²­í•˜ì‹œë©´ ê±°ì ˆë©ë‹ˆë‹¤!</p>' +
        '</div>' +
        '<p style="color: #e3e3e3; font-size: 14px; margin: 20px 0;">ì¹œêµ¬ì¶”ê°€ë¥¼ ì™„ë£Œí•˜ì‹  í›„ ì„œë²„ ìƒì„± ìš”ì²­ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.</p>' +
        '<div style="background: #d1ecf1; border: 2px solid #bee5eb; border-radius: 10px; padding: 15px; margin: 20px 0;">' +
        '<p style="color: #0c5460; font-weight: bold; font-size: 16px; margin: 0;">â° ìš”ì²­í•˜ì‹  í›„ ìŠ¹ì¸ë ë ¤ë©´ ìµœì†Œ 5ì¼ì€ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>' +
        '</div>' +
        '<div style="margin-top: 30px;">' +
        '<button id="confirmServerRequest" style="background: #d32c2c; color: #fff; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; font-weight: bold; margin-right: 10px; cursor: pointer;">ì„œë²„ ìš”ì²­í•˜ê¸°</button>' +
        '<button id="cancelServerRequest" style="background: #6c757d; color: #fff; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer;">ì·¨ì†Œ</button>' +
        '</div>' +
        '</div>';
      
      openModal(warningHtml);
      
      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
      document.getElementById('confirmServerRequest').onclick = function() {
        closeModal();
        processServerRequest();
      };
      
      document.getElementById('cancelServerRequest').onclick = function() {
        closeModal();
      };
    }

    // ì„œë²„ ìš”ì²­ ì²˜ë¦¬
    function processServerRequest() {
      db.ref('users/' + auth.currentUser.uid + '/server').set({
        status: 'pending',
        requestedAt: Date.now(),
        requestedBy: auth.currentUser.uid
      })
      .then(() => {
        // ê´€ë¦¬ìì—ê²Œ ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡
        db.ref('adminNotifications/serverRequests').push({
          userId: auth.currentUser.uid,
          userNickname: '', // ë‹‰ë„¤ì„ì€ ë³„ë„ë¡œ ê°€ì ¸ì˜¬ ì˜ˆì •
          timestamp: Date.now(),
          type: 'serverRequest'
        });
        
        showHomePanel();
        alert('ì„œë²„ ìƒì„± ìš”ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.\n\nì„œë²„ê°€ ìŠ¹ì¸ë˜ë©´ HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!');
      })
      .catch(error => {
        alert('ìš”ì²­ ì‹¤íŒ¨: ' + error.message);
      });
    }

    // ê³ ê°ì„¼í„° íŒ¨ë„
    function showCustomerServicePanel() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      let html = '<h2>ê³ ê°ì„¼í„°</h2>';
      
      // ë¬¸ì˜í•˜ê¸° ì„¹ì…˜
      html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
      html += '<h3>ë¬¸ì˜í•˜ê¸°</h3>';
      html += '<p>ê¶ê¸ˆí•œ ì ì´ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ë¬¸ì˜í•´ì£¼ì„¸ìš”!</p>';
      html += '<div style="margin-top:15px;">';
      html += '<textarea id="inquiryContent" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”..." rows="4" style="width:100%;padding:10px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:14px;outline:none;margin-bottom:10px;"></textarea>';
      html += '<button onclick="submitInquiry()" style="background:#2196f3;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:600;">ë¬¸ì˜í•˜ê¸°</button>';
      html += '</div>';
      html += '</div>';
      
      // ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ì„¹ì…˜
      html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
      html += '<h3>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h3>';
      
      const faqs = [
        {
          question: 'ì„œë²„ ìƒì„± ìš”ì²­ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
          answer: 'ë§Œë“¤ê¸° â†’ ì„œë²„ ìƒì„± ìš”ì²­ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìš”ì²­í•˜ì„¸ìš”. ë‹¨, HJNF000ë‹˜ì—ê²Œ ë¨¼ì € ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤.'
        },
        {
          question: 'ì„œë²„ ìŠ¹ì¸ê¹Œì§€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?',
          answer: 'ìµœì†Œ 5ì¼ì—ì„œ ìµœëŒ€ 2ì£¼ ì •ë„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê´€ë¦¬ìê°€ ê²€í†  í›„ ìŠ¹ì¸í•©ë‹ˆë‹¤.'
        },
        {
          question: 'ì¹œêµ¬ì¶”ê°€ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
          answer: 'ì¹œêµ¬ íŒ¨ë„ì—ì„œ ë‹¤ë¥¸ ì‚¬ìš©ìë¥¼ ê²€ìƒ‰í•˜ì—¬ ì¹œêµ¬ì¶”ê°€ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
        },
        {
          question: 'í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰ì€ ë¬´ì—‡ì¸ê°€ìš”?',
          answer: 'VIP, VIP+, MVP, MVP+ ë“±ê¸‰ì´ ìˆìœ¼ë©°, ê°ê° ë‹¤ë¥¸ í˜œíƒì„ ì œê³µí•©ë‹ˆë‹¤.'
        },
        {
          question: 'ì„œë²„ê°€ ê±°ì ˆëœ ì´ìœ ë¥¼ ì•Œê³  ì‹¶ì–´ìš”.',
          answer: 'ì¹œêµ¬ì¶”ê°€ë¥¼ í•˜ì§€ ì•Šì•˜ê±°ë‚˜, ë¶€ì ì ˆí•œ ë‚´ìš©ì´ í¬í•¨ëœ ê²½ìš° ê±°ì ˆë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
        }
      ];
      
      faqs.forEach((faq, index) => {
        html += '<div style="margin-bottom:15px;border:1px solid #333;border-radius:8px;overflow:hidden;">';
        html += '<div onclick="toggleFAQ(' + index + ')" style="background:#333;padding:15px;cursor:pointer;font-weight:600;color:#fff;display:flex;justify-content:space-between;align-items:center;">';
        html += '<span>' + faq.question + '</span>';
        html += '<span id="faqArrow-' + index + '">â–¼</span>';
        html += '</div>';
        html += '<div id="faqAnswer-' + index + '" style="display:none;padding:15px;background:#2a2a2a;color:#e3e3e3;line-height:1.6;">';
        html += faq.answer;
        html += '</div>';
        html += '</div>';
      });
      
      html += '</div>';
      
      // ì—°ë½ì²˜ ì •ë³´
      html += '<div style="background:#232428;padding:20px;border-radius:10px;">';
      html += '<h3>ì—°ë½ì²˜ ì •ë³´</h3>';
      html += '<div style="color:#e3e3e3;line-height:1.8;">';
      html += '<p><strong>ğŸ“§ ì´ë©”ì¼:</strong> hinf000mle@gmail.com</p>';
      html += '<p><strong>ğŸ’¬ ë””ìŠ¤ì½”ë“œ:</strong> <a href="https://discord.gg/VFcTXTW3sT" target="_blank" style="color:#2196f3;">https://discord.gg/VFcTXTW3sT</a></p>';
      html += '<p><strong>ğŸ“± ì‘ë‹µì‹œê°„:</strong> ë¬¸ì˜ í›„ 10ì¼ ì´ë‚´</p>';
      html += '</div>';
      html += '</div>';
      
      document.getElementById('formContainer').innerHTML = html;
    }

    // FAQ í† ê¸€ í•¨ìˆ˜
    function toggleFAQ(index) {
      const answer = document.getElementById('faqAnswer-' + index);
      const arrow = document.getElementById('faqArrow-' + index);
      
      if (answer.style.display === 'none') {
        answer.style.display = 'block';
        arrow.textContent = 'â–²';
      } else {
        answer.style.display = 'none';
        arrow.textContent = 'â–¼';
      }
    }

    // ë¬¸ì˜ ì œì¶œ í•¨ìˆ˜
    function submitInquiry() {
      const content = document.getElementById('inquiryContent').value.trim();
      if (!content) {
        alert(getText('inquiryContentRequired'));
        return;
      }
      
      if (!auth.currentUser) {
        alert(getText('loginRequired'));
        return;
      }
      
      // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      db.ref('users/' + auth.currentUser.uid + '/robloxNickname').once('value').then(snap => {
        const nickname = snap.val() || getText('anonymous');
        
        // ë¬¸ì˜ ë°ì´í„° ì €ì¥
        db.ref('inquiries').push({
          userId: auth.currentUser.uid,
          nickname: nickname,
          content: content,
          timestamp: Date.now(),
          status: 'pending',
          timeStr: new Date().toLocaleString()
        }).then(() => {
          alert(getText('inquirySubmitted'));
          document.getElementById('inquiryContent').value = '';
        }).catch(error => {
          alert(getText('inquiryFailed') + ': ' + error.message);
        });
      });
    }

    // ì–¸ì–´ ì„¤ì • íŒ¨ë„
    function showLanguagePanel() {
      let html = '<h2>ğŸŒ ì–¸ì–´ ì„¤ì •</h2>';
      
      // í˜„ì¬ ì–¸ì–´ í‘œì‹œ
      const currentLang = localStorage.getItem('selectedLanguage') || 'ko';
      html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
      html += '<h3>í˜„ì¬ ì–¸ì–´ / Current Language / å½“å‰è¯­è¨€ / ç¾åœ¨ã®è¨€èª</h3>';
      html += '<p style="color:#e3e3e3;font-size:18px;font-weight:bold;">' + getLanguageName(currentLang) + '</p>';
      html += '</div>';
      
      // ì–¸ì–´ ì„ íƒ
      html += '<div style="background:#232428;padding:20px;border-radius:10px;">';
      html += '<h3>ì–¸ì–´ ì„ íƒ / Language Selection / è¯­è¨€é€‰æ‹© / è¨€èªé¸æŠ</h3>';
      
      const languages = [
        { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },
        { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
        { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
        { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' }
      ];
      
      languages.forEach(lang => {
        const isSelected = currentLang === lang.code;
        html += '<div style="margin:10px 0;padding:15px;border:2px solid ' + (isSelected ? '#2196f3' : '#333') + ';border-radius:8px;cursor:pointer;background:' + (isSelected ? '#1e3a5f' : '#2a2a2a') + ';" onclick="changeLanguage(\'' + lang.code + '\')">';
        html += '<div style="display:flex;align-items:center;gap:10px;">';
        html += '<span style="font-size:24px;">' + lang.flag + '</span>';
        html += '<span style="font-size:18px;font-weight:bold;color:#fff;">' + lang.name + '</span>';
        if (isSelected) {
          html += '<span style="margin-left:auto;color:#2196f3;font-weight:bold;">âœ“ ì„ íƒë¨</span>';
        }
        html += '</div>';
        html += '</div>';
      });
      
      html += '</div>';
      
      document.getElementById('formContainer').innerHTML = html;
    }

    // ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
    function changeLanguage(langCode) {
      localStorage.setItem('selectedLanguage', langCode);
      
      // UI í…ìŠ¤íŠ¸ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
      updateUITexts();
      
      // í˜„ì¬ íŒ¨ë„ ìƒˆë¡œê³ ì¹¨
      const currentPanel = getCurrentPanel();
      if (currentPanel) {
        currentPanel();
      }
      
      // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
      const successMessages = {
        'ko': 'ì–¸ì–´ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!',
        'en': 'Language changed!',
        'zh': 'è¯­è¨€å·²æ›´æ”¹ï¼',
        'ja': 'è¨€èªãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸï¼'
      };
      
      alert(successMessages[langCode] || successMessages['ko']);
    }

    // í˜„ì¬ íŒ¨ë„ í™•ì¸ í•¨ìˆ˜
    function getCurrentPanel() {
      const container = document.getElementById('formContainer');
      if (!container) return null;
      
      const title = container.querySelector('h2');
      if (!title) return null;
      
      const titleText = title.textContent;
      
      // íŒ¨ë„ë³„ í•¨ìˆ˜ ë§¤í•‘
      if (titleText.includes('í™ˆ') || titleText.includes('Home') || titleText.includes('é¦–é¡µ') || titleText.includes('ãƒ›ãƒ¼ãƒ ')) {
        return showHomePanel;
      } else if (titleText.includes('ì„œë²„ ì°¨íŠ¸') || titleText.includes('Server Chart') || titleText.includes('æœåŠ¡å™¨å›¾è¡¨') || titleText.includes('ã‚µãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ')) {
        return showServerChart;
      } else if (titleText.includes('ë§Œë“¤ê¸°') || titleText.includes('Create') || titleText.includes('åˆ›å»º') || titleText.includes('ä½œæˆ')) {
        return showCreatePanel;
      } else if (titleText.includes('ì»¤ë®¤ë‹ˆí‹°') || titleText.includes('Community') || titleText.includes('ç¤¾åŒº') || titleText.includes('ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£')) {
        return showCommunity;
      } else if (titleText.includes('í”„ë¡œí•„') || titleText.includes('Profile') || titleText.includes('ä¸ªäººèµ„æ–™') || titleText.includes('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«')) {
        return showProfilePanel;
      } else if (titleText.includes('ë©”ì‹œì§€') || titleText.includes('Message') || titleText.includes('æ¶ˆæ¯') || titleText.includes('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸')) {
        return showMessagePanel;
      } else if (titleText.includes('ì¹œêµ¬') || titleText.includes('Friends') || titleText.includes('æœ‹å‹') || titleText.includes('ãƒ•ãƒ¬ãƒ³ãƒ‰')) {
        return showFriendsPanel;
      } else if (titleText.includes('ì¸ë²¤í† ë¦¬') || titleText.includes('Inventory') || titleText.includes('åº“å­˜') || titleText.includes('ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª')) {
        return showInventoryPanel;
      } else if (titleText.includes('ê³ ê°ì„¼í„°') || titleText.includes('Customer Service') || titleText.includes('å®¢æˆ·æœåŠ¡') || titleText.includes('ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒ¼ãƒ“ã‚¹')) {
        return showCustomerServicePanel;
      } else if (titleText.includes('ì–¸ì–´ ì„¤ì •') || titleText.includes('Language Settings') || titleText.includes('è¯­è¨€è®¾ç½®') || titleText.includes('è¨€èªè¨­å®š')) {
        return showLanguagePanel;
      }
      
      return null;
    }

    // ì–¸ì–´ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
    function getLanguageName(code) {
      const names = {
        'ko': 'í•œêµ­ì–´ ğŸ‡°ğŸ‡·',
        'en': 'English ğŸ‡ºğŸ‡¸',
        'zh': 'ä¸­æ–‡ ğŸ‡¨ğŸ‡³',
        'ja': 'æ—¥æœ¬èª ğŸ‡¯ğŸ‡µ'
      };
      return names[code] || 'í•œêµ­ì–´ ğŸ‡°ğŸ‡·';
    }

    // ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
    function getText(key) {
      const currentLang = localStorage.getItem('selectedLanguage') || 'ko';
      const texts = {
        'ko': {
          'home': 'í™ˆ',
          'serverChart': 'ì„œë²„ ì°¨íŠ¸',
          'create': 'ë§Œë“¤ê¸°',
          'community': 'ì»¤ë®¤ë‹ˆí‹°',
          'profile': 'í”„ë¡œí•„',
          'message': 'ë©”ì‹œì§€',
          'friends': 'ì¹œêµ¬',
          'inventory': 'ì¸ë²¤í† ë¦¬',
          'premium': 'í”„ë¦¬ë¯¸ì—„',
          'event': 'ì´ë²¤íŠ¸',
          'customerService': 'ê³ ê°ì„¼í„°',
          'languageSettings': 'ì–¸ì–´ ì„¤ì •',
          'membersList': 'ë§´ë²„ ëª©ë¡',
          'loginRequired': 'ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
          'anonymous': 'ìµëª…',
          'inquiryContentRequired': 'ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.',
          'inquirySubmitted': 'ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.',
          'inquiryFailed': 'ë¬¸ì˜ ì „ì†¡ ì‹¤íŒ¨',
          'search': 'ê²€ìƒ‰...',
          'welcome': 'í™˜ì˜í•©ë‹ˆë‹¤',
          'serverManagement': 'ì„œë²„ ê´€ë¦¬ ì‹œìŠ¤í…œ',
          'robloxServerManagement': 'ë¡œë¸”ë¡ìŠ¤ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ê³  ì¹œêµ¬ë“¤ê³¼ ì†Œí†µí•˜ì„¸ìš”!',
          'login': 'ë¡œê·¸ì¸',
          'signup': 'íšŒì›ê°€ì…',
          'logout': 'ë¡œê·¸ì•„ì›ƒ',
          'user': 'ì‚¬ìš©ì',
          'startServerManagement': 'ì„œë²„ ê´€ë¦¬ì™€ ì¹œêµ¬ë“¤ê³¼ì˜ ì†Œí†µì„ ì‹œì‘í•´ë³´ì„¸ìš”.',
          'myServerStatus': 'ë‚´ ì„œë²„ ìƒíƒœ',
          'premiumStatus': 'í”„ë¦¬ë¯¸ì—„ ìƒíƒœ',
          'friendRequestNotifications': 'ì¹œêµ¬ ìš”ì²­ ì•Œë¦¼',
          'noPendingFriendRequests': 'ëŒ€ê¸°ì¤‘ì¸ ì¹œêµ¬ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.',
          'noServerYet': 'ì•„ì§ ì„œë²„ê°€ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ë¥¼ ìƒì„±í•´ë³´ì„¸ìš”!',
          'serverCreateRequest': 'ì„œë²„ ìƒì„± ìš”ì²­',
          'grade': 'ë“±ê¸‰',
          'none': 'ì—†ìŒ',
          'loading': 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
          'serverChart': 'ì„œë²„ ì°¨íŠ¸',
          'create': 'ë§Œë“¤ê¸°',
          'community': 'ì»¤ë®¤ë‹ˆí‹°',
          'profile': 'í”„ë¡œí•„',
          'message': 'ë©”ì‹œì§€',
          'friends': 'ì¹œêµ¬',
          'inventory': 'ì¸ë²¤í† ë¦¬',
          'premium': 'í”„ë¦¬ë¯¸ì—„',
          'event': 'ì´ë²¤íŠ¸',
          'customerService': 'ê³ ê°ì„¼í„°',
          'languageSettings': 'ì–¸ì–´ ì„¤ì •',
          'membersList': 'ë§´ë²„ ëª©ë¡',
          'writePost': 'ê²Œì‹œê¸€ì„ ì‘ì„±í•˜ì„¸ìš”',
          'post': 'ê²Œì‹œí•˜ê¸°',
          'noPosts': 'ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.',
          'nickname': 'ë‹‰ë„¤ì„',
          'status': 'ìƒíƒœ',
          'createdDate': 'ìƒì„±ì¼',
          'join': 'ì°¸ì—¬',
          'joinRequest': 'ì°¸ì—¬ ì‹ ì²­',
          'requested': 'ì‹ ì²­ë¨',
          'serverOwnerApproval': 'ì„œë²„ ì†Œìœ ì ìŠ¹ì¸ ëŒ€ê¸°',
          'adminApproval': 'ì‚¬ì´íŠ¸ ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°',
          'rejected': 'ê±°ì ˆë¨',
          'enterServer': 'ì„œë²„ ì…ì¥',
          'noAddress': 'ì£¼ì†Œ ì—†ìŒ',
          'email': 'ì´ë©”ì¼',
          'password': 'ë¹„ë°€ë²ˆí˜¸',
          'confirmPassword': 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸',
          'robloxNickname': 'ë¡œë¸”ë¡ìŠ¤ ë‹‰ë„¤ì„',
          'emailVerification': 'ì´ë©”ì¼ ì¸ì¦',
          'verificationCode': 'ì¸ì¦ ì½”ë“œ',
          'sendVerification': 'ì¸ì¦ ì½”ë“œ ì „ì†¡',
          'verifyEmail': 'ì´ë©”ì¼ ì¸ì¦',
          'emailSent': 'ì¸ì¦ ì½”ë“œê°€ ì´ë©”ì¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.',
          'verificationSuccess': 'ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
          'verificationFailed': 'ì¸ì¦ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.',
          'emailNotVerified': 'ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.',
          'serverCreateGuide': 'ì„œë²„ ìƒì„± ì•ˆë‚´',
          'serverCreateGuide1': 'ì„œë²„ ìƒì„± ìš”ì²­ í›„ ê´€ë¦¬ì ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤',
          'serverCreateGuide2': 'ìŠ¹ì¸ë˜ë©´ ì„œë²„ ì£¼ì†Œê°€ ì œê³µë©ë‹ˆë‹¤',
          'serverCreateGuide3': 'ì„œë²„ëŠ” 24ì‹œê°„ ìš´ì˜ë©ë‹ˆë‹¤',
          'serverCreateGuide4': 'ê·œì¹™ì„ ìœ„ë°˜í•˜ë©´ ì„œë²„ê°€ ì •ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤',
          'serverCreateGuide5': 'ìŠ¹ì¸ë˜ê¸° ì „ì— HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!',
          'newServerCreate': 'ìƒˆ ì„œë²„ ìƒì„±',
          'robloxServerCreate': 'ë¡œë¸”ë¡ìŠ¤ ì„œë²„ë¥¼ ìƒì„±í•˜ì—¬ ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í”Œë ˆì´í•˜ì„¸ìš”!',
          'serverCreateRequestBtn': 'ì„œë²„ ìƒì„± ìš”ì²­',
          'currentServerStatus': 'í˜„ì¬ ì„œë²„ ìƒíƒœ',
          'serverName': 'ì„œë²„ ì´ë¦„',
          'serverDescription': 'ì„¤ëª…',
          'serverUrl': 'ì„œë²„ ì£¼ì†Œ',
          'serverCreateDate': 'ìƒì„±ì¼',
          'serverPending': 'ì„œë²„ ìƒì„± ìš”ì²­ì´ ëŒ€ê¸°ì¤‘ì…ë‹ˆë‹¤.',
          'serverPendingDesc': 'ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.',
          'serverApproved': 'ì„œë²„ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!',
          'serverApprovedDesc': 'ì„œë²„ë¥¼ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'serverPaused': 'ì„œë²„ê°€ ì¼ì‹œì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.',
          'serverPausedDesc': 'ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'serverResume': 'ì„œë²„ ì¬ê°œ',
          'serverStopped': 'ì„œë²„ê°€ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.',
          'serverStoppedDesc': 'ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.',
          'myInventory': 'ë‚´ ì¸ë²¤í† ë¦¬',
          'ownedItems': 'ë³´ìœ  ì•„ì´í…œ',
          'noItems': 'ë³´ìœ í•œ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.',
          'serverAddItem': 'ì„œë²„ ì¶”ê°€ ì•„ì´í…œ',
          'serverAddDesc': 'ì„œë²„ë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'vipDesc': 'VIP ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'vipPlusDesc': 'VIP+ ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'mvpDesc': 'MVP ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'mvpPlusDesc': 'MVP+ ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'useItem': 'ì‚¬ìš©í•˜ê¸°',
          'normalItem': 'ì¼ë°˜ ì•„ì´í…œ',
          'adminItemManagement': 'ê´€ë¦¬ì ì•„ì´í…œ ê´€ë¦¬',
          'adminItemDesc': 'ë‹¤ë¥¸ ë©¤ë²„ë“¤ì—ê²Œ ì•„ì´í…œì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
          'itemManagement': 'ì•„ì´í…œ ê´€ë¦¬',
          'myProfile': 'ë‚´ í”„ë¡œí•„',
          'robloxNicknameLabel': 'ë¡œë¸”ë¡ìŠ¤ ë‹‰ë„¤ì„',
          'joinDate': 'ê°€ì… ì‹œê¸°',
          'inventoryLabel': 'ì¸ë²¤í† ë¦¬',
          'premiumLabel': 'í”„ë¦¬ë¯¸ì—„',
          'serverCreateStatus': 'ì„œë²„ ìƒì„± ì—¬ë¶€',
          'serverCreateDateLabel': 'ì„œë²„ ìƒì„± ì‹œê¸°',
          'yes': 'O',
          'no': 'X',
          'dash': '-',
          'userInfo': 'ì‚¬ìš©ì ì •ë³´'
        },
        'en': {
          'home': 'Home',
          'serverChart': 'Server Chart',
          'create': 'Create',
          'community': 'Community',
          'profile': 'Profile',
          'message': 'Message',
          'friends': 'Friends',
          'inventory': 'Inventory',
          'premium': 'Premium',
          'event': 'Event',
          'customerService': 'Customer Service',
          'languageSettings': 'Language Settings',
          'membersList': 'Members List',
          'loginRequired': 'Please log in to use this feature.',
          'anonymous': 'Anonymous',
          'inquiryContentRequired': 'Please enter your inquiry content.',
          'inquirySubmitted': 'Your inquiry has been submitted successfully. We will respond as soon as possible.',
          'inquiryFailed': 'Inquiry submission failed',
          'search': 'Search...',
          'welcome': 'Welcome',
          'serverManagement': 'Server Management System',
          'robloxServerManagement': 'Manage Roblox servers and communicate with friends!',
          'login': 'Login',
          'signup': 'Sign Up',
          'logout': 'Logout',
          'user': 'User',
          'startServerManagement': 'Start managing servers and communicating with friends.',
          'myServerStatus': 'My Server Status',
          'premiumStatus': 'Premium Status',
          'friendRequestNotifications': 'Friend Request Notifications',
          'noPendingFriendRequests': 'No pending friend requests.',
          'noServerYet': 'No server yet. Create a server!',
          'serverCreateRequest': 'Server Create Request',
          'grade': 'Grade',
          'none': 'None',
          'loading': 'Loading...',
          'serverChart': 'Server Chart',
          'create': 'Create',
          'community': 'Community',
          'profile': 'Profile',
          'message': 'Message',
          'friends': 'Friends',
          'inventory': 'Inventory',
          'premium': 'Premium',
          'event': 'Event',
          'customerService': 'Customer Service',
          'languageSettings': 'Language Settings',
          'membersList': 'Members List',
          'writePost': 'Write a post',
          'post': 'Post',
          'noPosts': 'No posts available.',
          'nickname': 'Nickname',
          'status': 'Status',
          'createdDate': 'Created Date',
          'join': 'Join',
          'joinRequest': 'Join Request',
          'requested': 'Requested',
          'serverOwnerApproval': 'Server Owner Approval Pending',
          'adminApproval': 'Admin Approval Pending',
          'rejected': 'Rejected',
          'enterServer': 'Enter Server',
          'noAddress': 'No Address',
          'email': 'Email',
          'password': 'Password',
          'confirmPassword': 'Confirm Password',
          'robloxNickname': 'Roblox Nickname',
          'emailVerification': 'Email Verification',
          'verificationCode': 'Verification Code',
          'sendVerification': 'Send Verification Code',
          'verifyEmail': 'Verify Email',
          'emailSent': 'Verification code has been sent to your email.',
          'verificationSuccess': 'Email verification completed successfully.',
          'verificationFailed': 'Invalid verification code.',
          'emailNotVerified': 'Email verification is required.',
          'serverCreateGuide': 'Server Creation Guide',
          'serverCreateGuide1': 'Administrator approval is required after server creation request',
          'serverCreateGuide2': 'Server address will be provided upon approval',
          'serverCreateGuide3': 'Server runs for 24 hours',
          'serverCreateGuide4': 'Server may be suspended if rules are violated',
          'serverCreateGuide5': 'Please add HJNF000 as a friend before approval!',
          'newServerCreate': 'Create New Server',
          'robloxServerCreate': 'Create a Roblox server to play with friends!',
          'serverCreateRequestBtn': 'Server Create Request',
          'currentServerStatus': 'Current Server Status',
          'serverName': 'Server Name',
          'serverDescription': 'Description',
          'serverUrl': 'Server Address',
          'serverCreateDate': 'Created Date',
          'serverPending': 'Server creation request is pending.',
          'serverPendingDesc': 'Please wait for administrator approval.',
          'serverApproved': 'Server has been approved!',
          'serverApprovedDesc': 'You can now operate the server.',
          'serverPaused': 'Server has been paused.',
          'serverPausedDesc': 'You can resume the server.',
          'serverResume': 'Resume Server',
          'serverStopped': 'Server has been stopped.',
          'serverStoppedDesc': 'Please contact administrator.',
          'myInventory': 'My Inventory',
          'ownedItems': 'Owned Items',
          'noItems': 'No items owned.',
          'serverAddItem': 'Server Add Item',
          'serverAddDesc': 'Allows you to create additional servers.',
          'vipDesc': 'Receive VIP grade.',
          'vipPlusDesc': 'Receive VIP+ grade.',
          'mvpDesc': 'Receive MVP grade.',
          'mvpPlusDesc': 'Receive MVP+ grade.',
          'useItem': 'Use',
          'normalItem': 'Normal Item',
          'adminItemManagement': 'Admin Item Management',
          'adminItemDesc': 'Add items to other members.',
          'itemManagement': 'Item Management',
          'myProfile': 'My Profile',
          'robloxNicknameLabel': 'Roblox Nickname',
          'joinDate': 'Join Date',
          'inventoryLabel': 'Inventory',
          'premiumLabel': 'Premium',
          'serverCreateStatus': 'Server Created',
          'serverCreateDateLabel': 'Server Creation Date',
          'yes': 'O',
          'no': 'X',
          'dash': '-',
          'userInfo': 'User Information'
        },
        'zh': {
          'home': 'é¦–é¡µ',
          'serverChart': 'æœåŠ¡å™¨å›¾è¡¨',
          'create': 'åˆ›å»º',
          'community': 'ç¤¾åŒº',
          'profile': 'ä¸ªäººèµ„æ–™',
          'message': 'æ¶ˆæ¯',
          'friends': 'æœ‹å‹',
          'inventory': 'åº“å­˜',
          'premium': 'é«˜çº§ä¼šå‘˜',
          'event': 'æ´»åŠ¨',
          'customerService': 'å®¢æˆ·æœåŠ¡',
          'languageSettings': 'è¯­è¨€è®¾ç½®',
          'membersList': 'æˆå‘˜åˆ—è¡¨',
          'loginRequired': 'è¯·å…ˆç™»å½•ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚',
          'anonymous': 'åŒ¿å',
          'inquiryContentRequired': 'è¯·è¾“å…¥æ‚¨çš„å’¨è¯¢å†…å®¹ã€‚',
          'inquirySubmitted': 'æ‚¨çš„å’¨è¯¢å·²æˆåŠŸæäº¤ã€‚æˆ‘ä»¬å°†å°½å¿«å›å¤ã€‚',
          'inquiryFailed': 'å’¨è¯¢æäº¤å¤±è´¥',
          'search': 'æœç´¢...',
          'welcome': 'æ¬¢è¿',
          'serverManagement': 'æœåŠ¡å™¨ç®¡ç†ç³»ç»Ÿ',
          'robloxServerManagement': 'ç®¡ç†RobloxæœåŠ¡å™¨å¹¶ä¸æœ‹å‹äº¤æµï¼',
          'login': 'ç™»å½•',
          'signup': 'æ³¨å†Œ',
          'logout': 'ç™»å‡º',
          'user': 'ç”¨æˆ·',
          'startServerManagement': 'å¼€å§‹ç®¡ç†æœåŠ¡å™¨å¹¶ä¸æœ‹å‹äº¤æµã€‚',
          'myServerStatus': 'æˆ‘çš„æœåŠ¡å™¨çŠ¶æ€',
          'premiumStatus': 'é«˜çº§ä¼šå‘˜çŠ¶æ€',
          'friendRequestNotifications': 'å¥½å‹è¯·æ±‚é€šçŸ¥',
          'noPendingFriendRequests': 'æ²¡æœ‰å¾…å¤„ç†çš„å¥½å‹è¯·æ±‚ã€‚',
          'noServerYet': 'è¿˜æ²¡æœ‰æœåŠ¡å™¨ã€‚åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼',
          'serverCreateRequest': 'æœåŠ¡å™¨åˆ›å»ºè¯·æ±‚',
          'grade': 'ç­‰çº§',
          'none': 'æ— ',
          'loading': 'åŠ è½½ä¸­...',
          'serverChart': 'æœåŠ¡å™¨å›¾è¡¨',
          'create': 'åˆ›å»º',
          'community': 'ç¤¾åŒº',
          'profile': 'ä¸ªäººèµ„æ–™',
          'message': 'æ¶ˆæ¯',
          'friends': 'æœ‹å‹',
          'inventory': 'åº“å­˜',
          'premium': 'é«˜çº§ä¼šå‘˜',
          'event': 'æ´»åŠ¨',
          'customerService': 'å®¢æˆ·æœåŠ¡',
          'languageSettings': 'è¯­è¨€è®¾ç½®',
          'membersList': 'æˆå‘˜åˆ—è¡¨',
          'writePost': 'å†™å¸–å­',
          'post': 'å‘å¸ƒ',
          'noPosts': 'æ²¡æœ‰å¸–å­ã€‚',
          'nickname': 'æ˜µç§°',
          'status': 'çŠ¶æ€',
          'createdDate': 'åˆ›å»ºæ—¥æœŸ',
          'join': 'åŠ å…¥',
          'joinRequest': 'åŠ å…¥è¯·æ±‚',
          'requested': 'å·²è¯·æ±‚',
          'serverOwnerApproval': 'ç­‰å¾…æœåŠ¡å™¨æ‰€æœ‰è€…æ‰¹å‡†',
          'adminApproval': 'ç­‰å¾…ç®¡ç†å‘˜æ‰¹å‡†',
          'rejected': 'å·²æ‹’ç»',
          'enterServer': 'è¿›å…¥æœåŠ¡å™¨',
          'noAddress': 'æ— åœ°å€',
          'email': 'é‚®ç®±',
          'password': 'å¯†ç ',
          'confirmPassword': 'ç¡®è®¤å¯†ç ',
          'robloxNickname': 'Robloxæ˜µç§°',
          'emailVerification': 'é‚®ç®±éªŒè¯',
          'verificationCode': 'éªŒè¯ç ',
          'sendVerification': 'å‘é€éªŒè¯ç ',
          'verifyEmail': 'éªŒè¯é‚®ç®±',
          'emailSent': 'éªŒè¯ç å·²å‘é€åˆ°æ‚¨çš„é‚®ç®±ã€‚',
          'verificationSuccess': 'é‚®ç®±éªŒè¯å®Œæˆã€‚',
          'verificationFailed': 'éªŒè¯ç ä¸æ­£ç¡®ã€‚',
          'emailNotVerified': 'éœ€è¦é‚®ç®±éªŒè¯ã€‚',
          'serverCreateGuide': 'æœåŠ¡å™¨åˆ›å»ºæŒ‡å—',
          'serverCreateGuide1': 'æœåŠ¡å™¨åˆ›å»ºè¯·æ±‚åéœ€è¦ç®¡ç†å‘˜æ‰¹å‡†',
          'serverCreateGuide2': 'æ‰¹å‡†åå°†æä¾›æœåŠ¡å™¨åœ°å€',
          'serverCreateGuide3': 'æœåŠ¡å™¨è¿è¡Œ24å°æ—¶',
          'serverCreateGuide4': 'è¿åè§„åˆ™å¯èƒ½å¯¼è‡´æœåŠ¡å™¨æš‚åœ',
          'serverCreateGuide5': 'æ‰¹å‡†å‰è¯·å…ˆæ·»åŠ HJNF000ä¸ºå¥½å‹ï¼',
          'newServerCreate': 'åˆ›å»ºæ–°æœåŠ¡å™¨',
          'robloxServerCreate': 'åˆ›å»ºRobloxæœåŠ¡å™¨ä¸æœ‹å‹ä¸€èµ·æ¸¸æˆï¼',
          'serverCreateRequestBtn': 'æœåŠ¡å™¨åˆ›å»ºè¯·æ±‚',
          'currentServerStatus': 'å½“å‰æœåŠ¡å™¨çŠ¶æ€',
          'serverName': 'æœåŠ¡å™¨åç§°',
          'serverDescription': 'æè¿°',
          'serverUrl': 'æœåŠ¡å™¨åœ°å€',
          'serverCreateDate': 'åˆ›å»ºæ—¥æœŸ',
          'serverPending': 'æœåŠ¡å™¨åˆ›å»ºè¯·æ±‚å¾…å¤„ç†ã€‚',
          'serverPendingDesc': 'è¯·ç­‰å¾…ç®¡ç†å‘˜æ‰¹å‡†ã€‚',
          'serverApproved': 'æœåŠ¡å™¨å·²æ‰¹å‡†ï¼',
          'serverApprovedDesc': 'æ‚¨ç°åœ¨å¯ä»¥è¿è¥æœåŠ¡å™¨ã€‚',
          'serverPaused': 'æœåŠ¡å™¨å·²æš‚åœã€‚',
          'serverPausedDesc': 'æ‚¨å¯ä»¥æ¢å¤æœåŠ¡å™¨ã€‚',
          'serverResume': 'æ¢å¤æœåŠ¡å™¨',
          'serverStopped': 'æœåŠ¡å™¨å·²åœæ­¢ã€‚',
          'serverStoppedDesc': 'è¯·è”ç³»ç®¡ç†å‘˜ã€‚',
          'myInventory': 'æˆ‘çš„åº“å­˜',
          'ownedItems': 'æ‹¥æœ‰çš„ç‰©å“',
          'noItems': 'æ²¡æœ‰ç‰©å“ã€‚',
          'serverAddItem': 'æœåŠ¡å™¨æ·»åŠ ç‰©å“',
          'serverAddDesc': 'å…è®¸æ‚¨åˆ›å»ºé¢å¤–çš„æœåŠ¡å™¨ã€‚',
          'vipDesc': 'è·å¾—VIPç­‰çº§ã€‚',
          'vipPlusDesc': 'è·å¾—VIP+ç­‰çº§ã€‚',
          'mvpDesc': 'è·å¾—MVPç­‰çº§ã€‚',
          'mvpPlusDesc': 'è·å¾—MVP+ç­‰çº§ã€‚',
          'useItem': 'ä½¿ç”¨',
          'normalItem': 'æ™®é€šç‰©å“',
          'adminItemManagement': 'ç®¡ç†å‘˜ç‰©å“ç®¡ç†',
          'adminItemDesc': 'ä¸ºå…¶ä»–æˆå‘˜æ·»åŠ ç‰©å“ã€‚',
          'itemManagement': 'ç‰©å“ç®¡ç†',
          'myProfile': 'æˆ‘çš„ä¸ªäººèµ„æ–™',
          'robloxNicknameLabel': 'Robloxæ˜µç§°',
          'joinDate': 'åŠ å…¥æ—¥æœŸ',
          'inventoryLabel': 'åº“å­˜',
          'premiumLabel': 'é«˜çº§ä¼šå‘˜',
          'serverCreateStatus': 'æœåŠ¡å™¨åˆ›å»ºçŠ¶æ€',
          'serverCreateDateLabel': 'æœåŠ¡å™¨åˆ›å»ºæ—¥æœŸ',
          'yes': 'O',
          'no': 'X',
          'dash': '-',
          'userInfo': 'ç”¨æˆ·ä¿¡æ¯'
        },
        'ja': {
          'home': 'ãƒ›ãƒ¼ãƒ ',
          'serverChart': 'ã‚µãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ',
          'create': 'ä½œæˆ',
          'community': 'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£',
          'profile': 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
          'message': 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
          'friends': 'ãƒ•ãƒ¬ãƒ³ãƒ‰',
          'inventory': 'ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª',
          'premium': 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ',
          'event': 'ã‚¤ãƒ™ãƒ³ãƒˆ',
          'customerService': 'ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒ¼ãƒ“ã‚¹',
          'languageSettings': 'è¨€èªè¨­å®š',
          'membersList': 'ãƒ¡ãƒ³ãƒãƒ¼ãƒªã‚¹ãƒˆ',
          'loginRequired': 'ã“ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚',
          'anonymous': 'åŒ¿å',
          'inquiryContentRequired': 'ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
          'inquirySubmitted': 'ãŠå•ã„åˆã‚ã›ãŒæ­£å¸¸ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚ã§ãã‚‹ã ã‘æ—©ãå›ç­”ã„ãŸã—ã¾ã™ã€‚',
          'inquiryFailed': 'ãŠå•ã„åˆã‚ã›ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ',
          'search': 'æ¤œç´¢...',
          'welcome': 'ã‚ˆã†ã“ã',
          'serverManagement': 'ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ',
          'robloxServerManagement': 'Robloxã‚µãƒ¼ãƒãƒ¼ã‚’ç®¡ç†ã—ã€å‹é”ã¨äº¤æµã—ã¾ã—ã‚‡ã†ï¼',
          'login': 'ãƒ­ã‚°ã‚¤ãƒ³',
          'signup': 'ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—',
          'logout': 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ',
          'user': 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',
          'startServerManagement': 'ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ã¨å‹é”ã¨ã®äº¤æµã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚',
          'myServerStatus': 'ãƒã‚¤ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹',
          'premiumStatus': 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ çŠ¶æ…‹',
          'friendRequestNotifications': 'ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€šçŸ¥',
          'noPendingFriendRequests': 'ä¿ç•™ä¸­ã®ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚',
          'noServerYet': 'ã¾ã ã‚µãƒ¼ãƒãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ï¼',
          'serverCreateRequest': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ',
          'grade': 'ã‚°ãƒ¬ãƒ¼ãƒ‰',
          'none': 'ãªã—',
          'loading': 'èª­ã¿è¾¼ã¿ä¸­...',
          'serverChart': 'ã‚µãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ',
          'create': 'ä½œæˆ',
          'community': 'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£',
          'profile': 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
          'message': 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
          'friends': 'ãƒ•ãƒ¬ãƒ³ãƒ‰',
          'inventory': 'ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª',
          'premium': 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ',
          'event': 'ã‚¤ãƒ™ãƒ³ãƒˆ',
          'customerService': 'ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒ¼ãƒ“ã‚¹',
          'languageSettings': 'è¨€èªè¨­å®š',
          'membersList': 'ãƒ¡ãƒ³ãƒãƒ¼ãƒªã‚¹ãƒˆ',
          'writePost': 'æŠ•ç¨¿ã‚’æ›¸ã',
          'post': 'æŠ•ç¨¿',
          'noPosts': 'æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚',
          'nickname': 'ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ',
          'status': 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
          'createdDate': 'ä½œæˆæ—¥',
          'join': 'å‚åŠ ',
          'joinRequest': 'å‚åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ',
          'requested': 'ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¸ˆã¿',
          'serverOwnerApproval': 'ã‚µãƒ¼ãƒãƒ¼ã‚ªãƒ¼ãƒŠãƒ¼æ‰¿èªå¾…ã¡',
          'adminApproval': 'ç®¡ç†è€…æ‰¿èªå¾…ã¡',
          'rejected': 'æ‹’å¦æ¸ˆã¿',
          'enterServer': 'ã‚µãƒ¼ãƒãƒ¼ã«å…¥ã‚‹',
          'noAddress': 'ã‚¢ãƒ‰ãƒ¬ã‚¹ãªã—',
          'email': 'ãƒ¡ãƒ¼ãƒ«',
          'password': 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
          'confirmPassword': 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª',
          'robloxNickname': 'Robloxãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ',
          'emailVerification': 'ãƒ¡ãƒ¼ãƒ«èªè¨¼',
          'verificationCode': 'èªè¨¼ã‚³ãƒ¼ãƒ‰',
          'sendVerification': 'èªè¨¼ã‚³ãƒ¼ãƒ‰é€ä¿¡',
          'verifyEmail': 'ãƒ¡ãƒ¼ãƒ«èªè¨¼',
          'emailSent': 'èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒãƒ¡ãƒ¼ãƒ«ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚',
          'verificationSuccess': 'ãƒ¡ãƒ¼ãƒ«èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚',
          'verificationFailed': 'èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚',
          'emailNotVerified': 'ãƒ¡ãƒ¼ãƒ«èªè¨¼ãŒå¿…è¦ã§ã™ã€‚',
          'serverCreateGuide': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆã‚¬ã‚¤ãƒ‰',
          'serverCreateGuide1': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆå¾Œã€ç®¡ç†è€…ã®æ‰¿èªãŒå¿…è¦ã§ã™',
          'serverCreateGuide2': 'æ‰¿èªå¾Œã€ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæä¾›ã•ã‚Œã¾ã™',
          'serverCreateGuide3': 'ã‚µãƒ¼ãƒãƒ¼ã¯24æ™‚é–“ç¨¼åƒã—ã¾ã™',
          'serverCreateGuide4': 'ãƒ«ãƒ¼ãƒ«é•åã«ã‚ˆã‚Šã‚µãƒ¼ãƒãƒ¼ãŒåœæ­¢ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™',
          'serverCreateGuide5': 'æ‰¿èªå‰ã«HJNF000ã‚’ãƒ•ãƒ¬ãƒ³ãƒ‰ã«è¿½åŠ ã—ã¦ãã ã•ã„ï¼',
          'newServerCreate': 'æ–°ã—ã„ã‚µãƒ¼ãƒãƒ¼ä½œæˆ',
          'robloxServerCreate': 'Robloxã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¦å‹é”ã¨ä¸€ç·’ã«ãƒ—ãƒ¬ã‚¤ã—ã¾ã—ã‚‡ã†ï¼',
          'serverCreateRequestBtn': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ',
          'currentServerStatus': 'ç¾åœ¨ã®ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹',
          'serverName': 'ã‚µãƒ¼ãƒãƒ¼å',
          'serverDescription': 'èª¬æ˜',
          'serverUrl': 'ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹',
          'serverCreateDate': 'ä½œæˆæ—¥',
          'serverPending': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¿ç•™ä¸­ã§ã™ã€‚',
          'serverPendingDesc': 'ç®¡ç†è€…ã®æ‰¿èªã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚',
          'serverApproved': 'ã‚µãƒ¼ãƒãƒ¼ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸï¼',
          'serverApprovedDesc': 'ã‚µãƒ¼ãƒãƒ¼ã‚’é‹å–¶ã§ãã¾ã™ã€‚',
          'serverPaused': 'ã‚µãƒ¼ãƒãƒ¼ãŒä¸€æ™‚åœæ­¢ã•ã‚Œã¾ã—ãŸã€‚',
          'serverPausedDesc': 'ã‚µãƒ¼ãƒãƒ¼ã‚’å†é–‹ã§ãã¾ã™ã€‚',
          'serverResume': 'ã‚µãƒ¼ãƒãƒ¼å†é–‹',
          'serverStopped': 'ã‚µãƒ¼ãƒãƒ¼ãŒåœæ­¢ã•ã‚Œã¾ã—ãŸã€‚',
          'serverStoppedDesc': 'ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚',
          'myInventory': 'ãƒã‚¤ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª',
          'ownedItems': 'æ‰€æœ‰ã‚¢ã‚¤ãƒ†ãƒ ',
          'noItems': 'æ‰€æœ‰ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Šã¾ã›ã‚“ã€‚',
          'serverAddItem': 'ã‚µãƒ¼ãƒãƒ¼è¿½åŠ ã‚¢ã‚¤ãƒ†ãƒ ',
          'serverAddDesc': 'è¿½åŠ ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚',
          'vipDesc': 'VIPã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å–å¾—ã§ãã¾ã™ã€‚',
          'vipPlusDesc': 'VIP+ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å–å¾—ã§ãã¾ã™ã€‚',
          'mvpDesc': 'MVPã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å–å¾—ã§ãã¾ã™ã€‚',
          'mvpPlusDesc': 'MVP+ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å–å¾—ã§ãã¾ã™ã€‚',
          'useItem': 'ä½¿ç”¨',
          'normalItem': 'é€šå¸¸ã‚¢ã‚¤ãƒ†ãƒ ',
          'adminItemManagement': 'ç®¡ç†è€…ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†',
          'adminItemDesc': 'ä»–ã®ãƒ¡ãƒ³ãƒãƒ¼ã«ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã§ãã¾ã™ã€‚',
          'itemManagement': 'ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†',
          'myProfile': 'ãƒã‚¤ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
          'robloxNicknameLabel': 'Robloxãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ',
          'joinDate': 'å‚åŠ æ—¥',
          'inventoryLabel': 'ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª',
          'premiumLabel': 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ',
          'serverCreateStatus': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆçŠ¶æ…‹',
          'serverCreateDateLabel': 'ã‚µãƒ¼ãƒãƒ¼ä½œæˆæ—¥',
          'yes': 'O',
          'no': 'X',
          'dash': '-',
          'userInfo': 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±'
        }
      };
      
      return texts[currentLang] && texts[currentLang][key] ? texts[currentLang][key] : texts['ko'][key];
    }

    // ì»¤ë®¤ë‹ˆí‹° íŒ¨ë„
    function showCommunity() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">' + getText('loginRequired') + '</div>';
        return;
      }
      
      let html = '<h2>' + getText('community') + '</h2>';
      html += '<div style="margin-bottom: 20px;">';
      html += '<textarea id="postContent" placeholder="' + getText('writePost') + '..." rows="4" style="width: 100%; margin-bottom: 10px;"></textarea>';
      html += '<button onclick="submitPost()">' + getText('post') + '</button>';
      html += '</div>';
      html += '<div id="postsList">' + getText('loading') + '...</div>';
      
      document.getElementById('formContainer').innerHTML = html;
      
      // ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
      db.ref('posts').orderByChild('timestamp').limitToLast(20).on('value', function(snap) {
        const posts = snap.val() || {};
        let postsHtml = '';
        const postsArray = Object.entries(posts).reverse();
        
        postsArray.forEach(([key, post]) => {
          postsHtml += '<div style="background:#232428;padding:15px;border-radius:10px;margin-bottom:15px;">';
          postsHtml += '<div class="post-nickname">' + (post.nickname || 'ìµëª…') + '</div>';
          postsHtml += '<div class="post-content">' + post.content + '</div>';
          postsHtml += '<div class="post-date">' + (post.timeStr || '') + '</div>';
          postsHtml += '</div>';
        });
        
        document.getElementById('postsList').innerHTML = postsHtml || '<p>ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
      });
    }

    // ê²Œì‹œê¸€ ì‘ì„± í•¨ìˆ˜
    function submitPost() {
      const content = document.getElementById('postContent').value.trim();
      if (!content) {
        alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      db.ref('users/' + auth.currentUser.uid + '/robloxNickname').once('value').then(snap => {
        const nickname = snap.val() || 'ìµëª…';
        const now = Date.now();
        
        db.ref('posts').push({
          content: content,
          nickname: nickname,
          timestamp: now,
          timeStr: new Date(now).toLocaleString()
        }).then(() => {
          document.getElementById('postContent').value = '';
        });
      });
    }

    // ê´€ë¦¬ììš© ì•„ì´í…œ ê´€ë¦¬ íŒ¨ë„
    function showAdminInventoryManagement() {
      if (!auth.currentUser || auth.currentUser.uid !== ADMIN_UID) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      db.ref('users').once('value').then(snap => {
        const users = snap.val() || {};
        let html = '<h2>ê´€ë¦¬ì ì•„ì´í…œ ê´€ë¦¬</h2>';
        html += '<input type="text" id="inventoryMemberSearchInput" placeholder="ë‹‰ë„¤ì„ ê²€ìƒ‰..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">';
        html += '<table id="inventoryMembersTable" style="width:100%;background:#232428;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #18191c;font-size:16px;color:#e3e3e3;">';
        html += '<tr><th>ë‹‰ë„¤ì„</th><th>í˜„ì¬ ì•„ì´í…œ</th><th>ì•„ì´í…œ ì¶”ê°€</th><th>ê´€ë¦¬</th></tr>';
        
        for (const uid in users) {
          const user = users[uid];
          const inventory = user.inventory || [];
          const inventoryText = inventory.length > 0 ? inventory.join(', ') : 'ì—†ìŒ';
          
          html += '<tr data-nick="' + (user.robloxNickname || '') + '">';
          html += '<td>' + (user.robloxNickname || '-') + '</td>';
          html += '<td id="inventory-' + uid + '">';
          if (inventory.length > 0) {
            inventory.forEach((item, index) => {
              html += '<span style="display:inline-block;background:#333;padding:2px 6px;margin:2px;border-radius:4px;font-size:12px;">';
              html += item + ' <button onclick="removeItem(\'' + uid + '\', \'' + index + '\')" style="background:none;border:none;color:#f44336;cursor:pointer;font-size:12px;margin-left:4px;">Ã—</button>';
              html += '</span>';
            });
          } else {
            html += 'ì—†ìŒ';
          }
          html += '</td>';
          html += '<td>';
          html += '<select id="newItemType-' + uid + '" style="width:120px;padding:4px 8px;margin-right:5px;border-radius:4px;border:1px solid #333;background:#18191c;color:#fff;font-size:14px;">';
          html += '<option value="custom">ì§ì ‘ ì…ë ¥</option>';
          html += '<option value="[ì„œë²„ì¶”ê°€]">[ì„œë²„ì¶”ê°€]</option>';
          html += '<option value="[VIP]">[VIP]</option>';
          html += '<option value="[VIP+]">[VIP+]</option>';
          html += '<option value="[MVP]">[MVP]</option>';
          html += '<option value="[MVP+]">[MVP+]</option>';
          html += '</select>';
          html += '<input type="text" id="newItem-' + uid + '" placeholder="ìƒˆ ì•„ì´í…œ" style="width:120px;padding:4px 8px;margin-right:5px;border-radius:4px;border:1px solid #333;background:#18191c;color:#fff;font-size:14px;">';
          html += '<button class="addItemBtn" data-uid="' + uid + '" style="padding:4px 8px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px;">ì¶”ê°€</button>';
          html += '</td>';
          html += '<td>';
          html += '<button class="clearInventoryBtn" data-uid="' + uid + '" style="padding:4px 8px;background:#f44336;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px;">ì „ì²´ ì‚­ì œ</button>';
          html += '</td>';
          html += '</tr>';
        }
        html += '</table>';
        
        document.getElementById('formContainer').innerHTML = html;
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        setTimeout(() => {
          // ê²€ìƒ‰ ê¸°ëŠ¥
          const input = document.getElementById('inventoryMemberSearchInput');
          if (input) {
            input.addEventListener('input', function() {
              const v = this.value.trim().toLowerCase();
              document.querySelectorAll('#inventoryMembersTable tr[data-nick]').forEach(tr => {
                const nick = tr.getAttribute('data-nick').toLowerCase();
                tr.style.display = nick.includes(v) ? '' : 'none';
              });
            });
          }
          
          // ì•„ì´í…œ ì¶”ê°€ ë²„íŠ¼
          document.querySelectorAll('.addItemBtn').forEach(btn => {
            btn.onclick = function() {
              const uid = btn.getAttribute('data-uid');
              const select = document.getElementById('newItemType-' + uid);
              const input = document.getElementById('newItem-' + uid);
              const selectedType = select.value;
              const customItem = input.value.trim();
              
              let newItem = '';
              if (selectedType === 'custom') {
                newItem = customItem;
                if (!newItem) {
                  alert('ì•„ì´í…œ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                  return;
                }
              } else {
                newItem = selectedType;
              }
              
              db.ref('users/' + uid + '/inventory').once('value').then(snap => {
                const currentInventory = snap.val() || [];
                if (currentInventory.includes(newItem)) {
                  alert('ì´ë¯¸ ë³´ìœ í•œ ì•„ì´í…œì…ë‹ˆë‹¤.');
                  return;
                }
                
                const updatedInventory = [...currentInventory, newItem];
                db.ref('users/' + uid + '/inventory').set(updatedInventory).then(() => {
                  input.value = '';
                  select.value = 'custom';
                  alert('ì•„ì´í…œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                  showAdminInventoryManagement(); // ìƒˆë¡œê³ ì¹¨
                });
              });
            };
          });
          
          // ì¸ë²¤í† ë¦¬ ì „ì²´ ì‚­ì œ ë²„íŠ¼
          document.querySelectorAll('.clearInventoryBtn').forEach(btn => {
            btn.onclick = function() {
              const uid = btn.getAttribute('data-uid');
              if (confirm('ì´ ì‚¬ìš©ìì˜ ëª¨ë“  ì•„ì´í…œì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                db.ref('users/' + uid + '/inventory').set([]).then(() => {
                  alert('ì¸ë²¤í† ë¦¬ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                  showAdminInventoryManagement(); // ìƒˆë¡œê³ ì¹¨
                });
              }
            };
          });
        }, 100);
      });
    }

    // ê°œë³„ ì•„ì´í…œ ì‚­ì œ í•¨ìˆ˜
    function removeItem(uid, itemIndex) {
      if (confirm('ì´ ì•„ì´í…œì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        db.ref('users/' + uid + '/inventory').once('value').then(snap => {
          const inventory = snap.val() || [];
          inventory.splice(itemIndex, 1);
          db.ref('users/' + uid + '/inventory').set(inventory).then(() => {
            alert('ì•„ì´í…œì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            showAdminInventoryManagement(); // ìƒˆë¡œê³ ì¹¨
          });
        });
      }
    }

    // ì„œë²„ ì•„ì´í…œ ì‚¬ìš© í•¨ìˆ˜
    function useServerItem(itemName, itemIndex) {
      if (!auth.currentUser) {
        alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
      }

      // ì•„ì´í…œëª…ì— ë”°ë¥¸ ì²˜ë¦¬
      if (itemName === '[ì„œë²„ì¶”ê°€]') {
        // ì„œë²„ ì¶”ê°€ ì•„ì´í…œ ì‚¬ìš©
        if (confirm('[ì„œë²„ì¶”ê°€] ì•„ì´í…œì„ ì‚¬ìš©í•˜ì—¬ ì¶”ê°€ ì„œë²„ë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
          db.ref('users/' + auth.currentUser.uid + '/inventory').once('value').then(snap => {
            const inventory = snap.val() || [];
            inventory.splice(itemIndex, 1);
            
            // ì¸ë²¤í† ë¦¬ ì—…ë°ì´íŠ¸
            db.ref('users/' + auth.currentUser.uid).update({
              inventory: inventory
            }).then(() => {
              alert('[ì„œë²„ì¶”ê°€] ì•„ì´í…œì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤! ì´ì œ ì¶”ê°€ ì„œë²„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
              showInventoryPanel(); // ì¸ë²¤í† ë¦¬ íŒ¨ë„ ìƒˆë¡œê³ ì¹¨
            }).catch(error => {
              alert('ì•„ì´í…œ ì‚¬ìš© ì‹¤íŒ¨: ' + error.message);
            });
          });
        }
      } else if (['[VIP]', '[VIP+]', '[MVP]', '[MVP+]'].includes(itemName)) {
        // í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰ ì•„ì´í…œ ì‚¬ìš©
        const premiumGrade = itemName.replace(/[\[\]]/g, ''); // ëŒ€ê´„í˜¸ ì œê±°
        
        if (confirm(itemName + ' ì•„ì´í…œì„ ì‚¬ìš©í•˜ì—¬ ' + premiumGrade + ' ë“±ê¸‰ì„ ë°›ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?')) {
          // í˜„ì¬ ì¸ë²¤í† ë¦¬ì—ì„œ ì•„ì´í…œ ì œê±°
          db.ref('users/' + auth.currentUser.uid + '/inventory').once('value').then(snap => {
            const inventory = snap.val() || [];
            inventory.splice(itemIndex, 1);
            
            // ì¸ë²¤í† ë¦¬ ì—…ë°ì´íŠ¸ ë° í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰ ì„¤ì •
            db.ref('users/' + auth.currentUser.uid).update({
              inventory: inventory,
              premium: premiumGrade
            }).then(() => {
              alert('ì•„ì´í…œì„ ì‚¬ìš©í•˜ì—¬ ' + premiumGrade + ' ë“±ê¸‰ì„ ë°›ì•˜ìŠµë‹ˆë‹¤!');
              showInventoryPanel(); // ì¸ë²¤í† ë¦¬ íŒ¨ë„ ìƒˆë¡œê³ ì¹¨
            }).catch(error => {
              alert('ì•„ì´í…œ ì‚¬ìš© ì‹¤íŒ¨: ' + error.message);
            });
          });
        }
      } else {
        alert('ì˜ëª»ëœ ì•„ì´í…œì…ë‹ˆë‹¤.');
        return;
      }
    }

    // ì¸ë²¤í† ë¦¬ íŒ¨ë„
    function showInventoryPanel() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      db.ref('users/' + auth.currentUser.uid).once('value').then(snap => {
        const user = snap.val() || {};
        const inventory = user.inventory || [];
        
        let html = '<h2>ì¸ë²¤í† ë¦¬</h2>';
        html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
        html += '<h3>ë³´ìœ  ì•„ì´í…œ</h3>';
        if (inventory.length > 0) {
          html += '<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px;">';
          inventory.forEach((item, index) => {
            const isServerItem = ['[ì„œë²„ì¶”ê°€]', '[VIP]', '[VIP+]', '[MVP]', '[MVP+]'].includes(item);
            html += '<div style="background:#333;padding:15px;border-radius:8px;border:1px solid #444;">';
            html += '<div style="font-weight:600;margin-bottom:8px;">' + item + '</div>';
            if (isServerItem) {
              html += '<button onclick="useServerItem(\'' + item + '\', ' + index + ')" style="width:100%;padding:8px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:600;">ì‚¬ìš©í•˜ê¸°</button>';
            } else {
              html += '<div style="color:#888;font-size:12px;">ì¼ë°˜ ì•„ì´í…œ</div>';
            }
            html += '</div>';
          });
          html += '</div>';
        } else {
          html += '<p>ë³´ìœ í•œ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        html += '</div>';
        
        // ì„œë²„ ì¶”ê°€ ì•„ì´í…œ ì„¤ëª…
        html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
        html += '<h3>ì„œë²„ ì¶”ê°€ ì•„ì´í…œ</h3>';
        html += '<div style="color:#e3e3e3;line-height:1.6;">';
        html += '<p><strong>[ì„œë²„ì¶”ê°€]:</strong> ì„œë²„ë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
        html += '<p><strong>[VIP]:</strong> VIP ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
        html += '<p><strong>[VIP+]:</strong> VIP+ ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
        html += '<p><strong>[MVP]:</strong> MVP ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
        html += '<p><strong>[MVP+]:</strong> MVP+ ë“±ê¸‰ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
        html += '</div>';
        html += '</div>';
        
        // ê´€ë¦¬ììš© ì•„ì´í…œ ê´€ë¦¬ íŒ¨ë„
        if (auth.currentUser.uid === ADMIN_UID) {
          html += '<div style="background:#232428;padding:20px;border-radius:10px;">';
          html += '<h3>ê´€ë¦¬ì ì•„ì´í…œ ê´€ë¦¬</h3>';
          html += '<p>ë‹¤ë¥¸ ë©¤ë²„ë“¤ì—ê²Œ ì•„ì´í…œì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
          html += '<button onclick="showAdminInventoryManagement()" style="margin-top:10px;padding:10px 20px;background:#ff9800;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì•„ì´í…œ ê´€ë¦¬</button>';
          html += '</div>';
        }
        
        document.getElementById('formContainer').innerHTML = html;
      });
    }

    // ê´€ë¦¬ì ì„œë²„ ê´€ë¦¬ íŒ¨ë„
    function showAdminServerManagement() {
      if (!auth.currentUser || auth.currentUser.uid !== ADMIN_UID) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      let html = '<h2>ì„œë²„ ê´€ë¦¬</h2>';
      html += '<input type="text" id="adminServerSearchInput" placeholder="ë‹‰ë„¤ì„/ì„œë²„ëª… ê²€ìƒ‰..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">';
      html += '<div id="adminServerTableContainer">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
      
      document.getElementById('formContainer').innerHTML = html;
      
      // ì‹¤ì‹œê°„ ì„œë²„ ê´€ë¦¬ í…Œì´ë¸” ì—…ë°ì´íŠ¸
      showRealtimeAdminServerTable();
    }

    // ì‹¤ì‹œê°„ ê´€ë¦¬ì ì„œë²„ í…Œì´ë¸” ì—…ë°ì´íŠ¸
    function showRealtimeAdminServerTable() {
      db.ref('users').on('value', function(snap) {
        const users = snap.val() || {};
        let html = '<table id="adminServerTable" style="width:100%;background:#232428;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #18191c;font-size:16px;color:#e3e3e3;">';
        html += '<tr><th>ë‹‰ë„¤ì„</th><th>ìƒíƒœ</th><th>ìš”ì²­ì¼</th><th>ê´€ë¦¬</th></tr>';
        
        for (const uid in users) {
          const user = users[uid];
          if (!user.server) continue;
          
          let statusKor = '';
          switch (user.server.status) {
            case 'pending': statusKor = 'ëŒ€ê¸°ì¤‘'; break;
            case 'approved': statusKor = 'ìš´ì˜ì¤‘'; break;
            case 'stopped': statusKor = 'ì •ì§€ë¨'; break;
            case 'paused': statusKor = 'ì¼ì‹œì •ì§€'; break;
            default: statusKor = user.server.status;
          }
          
          html += '<tr data-nick="' + (user.robloxNickname || '') + '">';
          html += '<td>' + (user.robloxNickname || '-') + '</td>';
          html += '<td id="adminStatus-' + uid + '">' + statusKor + '</td>';
          html += '<td>' + (user.server.requestedAt ? new Date(user.server.requestedAt).toLocaleString() : '-') + '</td>';
          html += '<td>';
          
          if (user.server.status === 'pending') {
            html += '<button class="approveServerBtn" data-uid="' + uid + '">ìŠ¹ì¸</button> ';
            html += '<button class="rejectServerBtn" data-uid="' + uid + '">ê±°ì ˆ</button>';
          } else if (user.server.status === 'approved') {
            html += '<button class="stopServerBtn" data-uid="' + uid + '">ì •ì§€</button> ';
            html += '<button class="pauseServerBtn" data-uid="' + uid + '">ì¼ì‹œì •ì§€</button>';
          } else if (user.server.status === 'stopped') {
            html += '<button class="approveServerBtn" data-uid="' + uid + '">ì¬ìŠ¹ì¸</button>';
          } else if (user.server.status === 'paused') {
            html += '<button class="approveServerBtn" data-uid="' + uid + '">ì¬ê°œ</button> ';
            html += '<button class="stopServerBtn" data-uid="' + uid + '">ì •ì§€</button>';
          }
          
          // ëª¨ë“  ìƒíƒœì—ì„œ ì„œë²„ ì‚­ì œ ë²„íŠ¼ ì¶”ê°€
          html += ' <button class="deleteServerBtn" data-uid="' + uid + '">ì‚­ì œ</button>';
          
          html += '</td>';
          html += '</tr>';
        }
        html += '</table>';
        
        const container = document.getElementById('adminServerTableContainer');
        if (container) {
          container.innerHTML = html;
          
          // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¬ë“±ë¡
          setupAdminServerEventListeners();
        }
      });
    }

    // ê´€ë¦¬ì ì„œë²„ ê´€ë¦¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    function setupAdminServerEventListeners() {
      // ê²€ìƒ‰ ê¸°ëŠ¥
      const input = document.getElementById('adminServerSearchInput');
      if (input) {
        input.addEventListener('input', function() {
          const v = this.value.trim().toLowerCase();
          document.querySelectorAll('#adminServerTable tr[data-nick]').forEach(tr => {
            const nick = tr.getAttribute('data-nick').toLowerCase();
            tr.style.display = nick.includes(v) ? '' : 'none';
          });
        });
      }
      
      // ì„œë²„ ìŠ¹ì¸ ë²„íŠ¼
      document.querySelectorAll('.approveServerBtn').forEach(btn => {
        btn.onclick = function() {
          const uid = btn.getAttribute('data-uid');
          const serverUrl = prompt('ì„œë²„ URLì„ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­):');
          
          const updateData = {
            status: 'approved',
            approvedAt: Date.now()
          };
          if (serverUrl) updateData.url = serverUrl;
          
          db.ref('users/' + uid + '/server').update(updateData).then(() => {
            alert('ì„œë²„ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
          });
        };
      });
      
      // ì„œë²„ ê±°ì ˆ ë²„íŠ¼
      document.querySelectorAll('.rejectServerBtn').forEach(btn => {
        btn.onclick = function() {
          const uid = btn.getAttribute('data-uid');
          if (confirm('ì„œë²„ ìš”ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            db.ref('users/' + uid + '/server').remove().then(() => {
              alert('ì„œë²„ ìš”ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
          }
        };
      });
      
      // ì„œë²„ ì •ì§€ ë²„íŠ¼
      document.querySelectorAll('.stopServerBtn').forEach(btn => {
        btn.onclick = function() {
          const uid = btn.getAttribute('data-uid');
          if (confirm('ì„œë²„ë¥¼ ì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            db.ref('users/' + uid + '/server/status').set('stopped').then(() => {
              alert('ì„œë²„ê°€ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
          }
        };
      });
      
      // ì„œë²„ ì¼ì‹œì •ì§€ ë²„íŠ¼
      document.querySelectorAll('.pauseServerBtn').forEach(btn => {
        btn.onclick = function() {
          const uid = btn.getAttribute('data-uid');
          if (confirm('ì„œë²„ë¥¼ ì¼ì‹œì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            db.ref('users/' + uid + '/server/status').set('paused').then(() => {
              alert('ì„œë²„ê°€ ì¼ì‹œì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
          }
        };
      });
      
      // ì„œë²„ ì‚­ì œ ë²„íŠ¼
      document.querySelectorAll('.deleteServerBtn').forEach(btn => {
        btn.onclick = function() {
          const uid = btn.getAttribute('data-uid');
          if (confirm('ì„œë²„ë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
            db.ref('users/' + uid + '/server').remove().then(() => {
              alert('ì„œë²„ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
          }
        };
      });
    }

    // ë§Œë“¤ê¸° íŒ¨ë„ (ì„œë²„ ìƒì„±)
    function showCreatePanel() {
      if (!auth.currentUser) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      db.ref('users/' + auth.currentUser.uid).once('value').then(snap => {
        const user = snap.val() || {};
        let html = '<h2>ì„œë²„ ë§Œë“¤ê¸°</h2>';
        
        if (user.server) {
          // ì´ë¯¸ ì„œë²„ê°€ ìˆëŠ” ê²½ìš°
          let statusKor = '';
          switch (user.server.status) {
            case 'pending': statusKor = 'ëŒ€ê¸°ì¤‘'; break;
            case 'approved': statusKor = 'ìš´ì˜ì¤‘'; break;
            case 'stopped': statusKor = 'ì •ì§€ë¨'; break;
            case 'paused': statusKor = 'ì¼ì‹œì •ì§€'; break;
            default: statusKor = user.server.status;
          }
          
          html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
          html += '<h3>í˜„ì¬ ì„œë²„ ìƒíƒœ</h3>';
          html += '<p><strong>ì„œë²„ ì´ë¦„:</strong> ' + (user.server.name || '-') + '</p>';
          html += '<p><strong>ìƒíƒœ:</strong> ' + statusKor + '</p>';
          html += '<p><strong>ìƒì„±ì¼:</strong> ' + (user.server.requestedAt ? new Date(user.server.requestedAt).toLocaleString() : '-') + '</p>';
          if (user.server.description) {
            html += '<p><strong>ì„¤ëª…:</strong> ' + user.server.description + '</p>';
          }
          if (user.server.url) {
            html += '<p><strong>ì„œë²„ ì£¼ì†Œ:</strong> <a href="' + user.server.url + '" target="_blank" style="color:#2196f3;">' + user.server.url + '</a></p>';
          }
          html += '</div>';
          
          if (user.server.status === 'pending') {
            html += '<div style="background:#ff9800;padding:15px;border-radius:10px;margin-bottom:20px;">';
            html += '<p><strong>ì„œë²„ ìƒì„± ìš”ì²­ì´ ëŒ€ê¸°ì¤‘ì…ë‹ˆë‹¤.</strong></p>';
            html += '<p>ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>';
            html += '</div>';
          } else if (user.server.status === 'approved') {
            html += '<div style="background:#4caf50;padding:15px;border-radius:10px;margin-bottom:20px;">';
            html += '<p><strong>ì„œë²„ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!</strong></p>';
            html += '<p>ì„œë²„ë¥¼ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
            html += '<p style="color:#fff;font-weight:600;margin-top:10px;">ğŸ’¡ HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!</p>';
            html += '</div>';
          } else if (user.server.status === 'paused') {
            html += '<div style="background:#ff9800;padding:15px;border-radius:10px;margin-bottom:20px;">';
            html += '<p><strong>ì„œë²„ê°€ ì¼ì‹œì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.</strong></p>';
            html += '<p>ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>';
            html += '<button onclick="resumeServer()" style="margin-top:10px;padding:10px 20px;background:#4caf50;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì„œë²„ ì¬ê°œ</button>';
            html += '</div>';
          } else if (user.server.status === 'stopped') {
            html += '<div style="background:#f44336;padding:15px;border-radius:10px;margin-bottom:20px;">';
            html += '<p><strong>ì„œë²„ê°€ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.</strong></p>';
            html += '<p>ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.</p>';
            html += '</div>';
          }
        } else {
          // ì„œë²„ê°€ ì—†ëŠ” ê²½ìš°
      html += '<div style="background:#232428;padding:20px;border-radius:10px;margin-bottom:20px;">';
      html += '<h3>ìƒˆ ì„œë²„ ìƒì„±</h3>';
      html += '<p>ë¡œë¸”ë¡ìŠ¤ ì„œë²„ë¥¼ ìƒì„±í•˜ì—¬ ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í”Œë ˆì´í•˜ì„¸ìš”!</p>';
      html += '<p style="color:#ffd700;font-weight:600;margin-top:10px;">ğŸ’¡ìŠ¹ì¸ë˜ê¸° ì „ì— HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!</p>';
      html += '<button onclick="showServerRequestForm()" style="margin-top:15px;padding:12px 24px;background:#d32c2c;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;">ì„œë²„ ìƒì„± ìš”ì²­</button>';
      html += '</div>';
          
          html += '<div style="background:#232428;padding:20px;border-radius:10px;">';
          html += '<h3>ì„œë²„ ìƒì„± ì•ˆë‚´</h3>';
          html += '<ul style="color:#e3e3e3;line-height:1.6;">';
          html += '<li>ì„œë²„ ìƒì„± ìš”ì²­ í›„ ê´€ë¦¬ì ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</li>';
          html += '<li>ìŠ¹ì¸ë˜ë©´ ì„œë²„ ì£¼ì†Œê°€ ì œê³µë©ë‹ˆë‹¤</li>';
          html += '<li>ì„œë²„ëŠ” 24ì‹œê°„ ìš´ì˜ë©ë‹ˆë‹¤</li>';
          html += '<li>ê·œì¹™ì„ ìœ„ë°˜í•˜ë©´ ì„œë²„ê°€ ì •ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>';
          html += '<li style="color:#ffd700;font-weight:600;">ğŸ’¡ ìŠ¹ì¸ë˜ê¸° ì „ì— HJNF000ë‹˜ì—ê²Œ ì¹œêµ¬ì¶”ê°€ë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”!</li>';
          html += '</ul>';
          html += '</div>';
        }
        
        document.getElementById('formContainer').innerHTML = html;
      });
    }

    // ë©¤ë²„ ëª©ë¡ íŒ¨ë„ (ê´€ë¦¬ìë§Œ)
    function showMembersPanel() {
      if (!auth.currentUser || auth.currentUser.uid !== ADMIN_UID) {
        document.getElementById('formContainer').innerHTML = '<div style="color:red">ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
        return;
      }
      
      db.ref('users').once('value').then(snap => {
        const users = snap.val() || {};
        let html = '<h2>ì „ì²´ ë©¤ë²„ ëª©ë¡</h2>';
        html += '<input type="text" id="memberSearchInput" placeholder="ë‹‰ë„¤ì„ ê²€ìƒ‰..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">';
        html += '<table id="membersTable" style="width:100%;background:#232428;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #18191c;font-size:16px;color:#e3e3e3;">';
        html += '<tr><th>ë‹‰ë„¤ì„</th><th>ê°€ì…ì¼</th><th>í”„ë¦¬ë¯¸ì—„</th><th>ì„œë²„</th><th>ìƒíƒœ</th><th>ê´€ë¦¬</th></tr>';
        
        for (const uid in users) {
          const user = users[uid];
          const isBlocked = user.blocked || false;
          const isIpBlocked = user.ipBlocked || false;
          let statusText = 'ì •ìƒ';
          if (isIpBlocked) statusText = 'IPì°¨ë‹¨';
          else if (isBlocked) statusText = 'ì°¨ë‹¨';
          
          html += '<tr data-nick="' + (user.robloxNickname || '') + '">';
          html += '<td>' + (user.robloxNickname || '-') + '</td>';
          html += '<td>' + (user.createdAt ? new Date(user.createdAt).toLocaleString() : '-') + '</td>';
          html += '<td>' + (user.premium || '-') + '</td>';
          let serverStatusText = '-';
          if (user.server) {
            switch (user.server.status) {
              case 'pending': serverStatusText = 'ëŒ€ê¸°ì¤‘'; break;
              case 'approved': serverStatusText = 'ìš´ì˜ì¤‘'; break;
              case 'stopped': serverStatusText = 'ì •ì§€ë¨'; break;
              case 'paused': serverStatusText = 'ì¼ì‹œì •ì§€'; break;
              default: serverStatusText = user.server.status || '-';
            }
          }
          html += '<td>' + serverStatusText + '</td>';
          html += '<td id="status-' + uid + '">' + statusText + '</td>';
          html += '<td>';
          html += '<button class="blockBtn" data-uid="' + uid + '" data-action="' + (isBlocked ? 'unblock' : 'block') + '">' + (isBlocked ? 'ì°¨ë‹¨í•´ì œ' : 'ì°¨ë‹¨') + '</button> ';
          html += '<button class="ipBlockBtn" data-uid="' + uid + '" data-action="' + (isIpBlocked ? 'unipblock' : 'ipblock') + '">' + (isIpBlocked ? 'IPì°¨ë‹¨í•´ì œ' : 'IPì°¨ë‹¨') + '</button>';
          html += '</td>';
          html += '</tr>';
        }
        html += '</table>';
        
        document.getElementById('formContainer').innerHTML = html;
        
        // ê²€ìƒ‰ ê¸°ëŠ¥
        setTimeout(() => {
          const input = document.getElementById('memberSearchInput');
          if (input) {
            input.addEventListener('input', function() {
              const v = this.value.trim().toLowerCase();
              document.querySelectorAll('#membersTable tr[data-nick]').forEach(tr => {
                const nick = tr.getAttribute('data-nick').toLowerCase();
                tr.style.display = nick.includes(v) ? '' : 'none';
              });
            });
          }
          
          // ì°¨ë‹¨ ë²„íŠ¼ ì´ë²¤íŠ¸
          document.querySelectorAll('.blockBtn').forEach(btn => {
            btn.onclick = function() {
              const uid = btn.getAttribute('data-uid');
              const action = btn.getAttribute('data-action');
              const isBlock = action === 'block';
              
              if (confirm((isBlock ? 'ì°¨ë‹¨' : 'ì°¨ë‹¨í•´ì œ') + 'í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                db.ref('users/' + uid + '/blocked').set(isBlock ? true : null).then(() => {
                  btn.textContent = isBlock ? 'ì°¨ë‹¨í•´ì œ' : 'ì°¨ë‹¨';
                  btn.setAttribute('data-action', isBlock ? 'unblock' : 'block');
                  document.getElementById('status-' + uid).textContent = isBlock ? 'ì°¨ë‹¨' : 'ì •ìƒ';
                  alert((isBlock ? 'ì°¨ë‹¨' : 'ì°¨ë‹¨í•´ì œ') + ' ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                });
              }
            };
          });
          
          // IPì°¨ë‹¨ ë²„íŠ¼ ì´ë²¤íŠ¸
          document.querySelectorAll('.ipBlockBtn').forEach(btn => {
            btn.onclick = function() {
              const uid = btn.getAttribute('data-uid');
              const action = btn.getAttribute('data-action');
              const isIpBlock = action === 'ipblock';
              
              if (confirm((isIpBlock ? 'IPì°¨ë‹¨' : 'IPì°¨ë‹¨í•´ì œ') + 'í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                db.ref('users/' + uid + '/ipBlocked').set(isIpBlock ? true : null).then(() => {
                  btn.textContent = isIpBlock ? 'IPì°¨ë‹¨í•´ì œ' : 'IPì°¨ë‹¨';
                  btn.setAttribute('data-action', isIpBlock ? 'unipblock' : 'ipblock');
                  document.getElementById('status-' + uid).textContent = isIpBlock ? 'IPì°¨ë‹¨' : 'ì •ìƒ';
                  alert((isIpBlock ? 'IPì°¨ë‹¨' : 'IPì°¨ë‹¨í•´ì œ') + ' ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                });
              }
            };
          });
        }, 100);
      });
    }

    // UI í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateUITexts() {
      const currentLang = localStorage.getItem('selectedLanguage') || 'ko';
      
      // ë„¤ë¹„ê²Œì´ì…˜ ë°” í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      const navHomeBtn = document.getElementById('navHomeBtn');
      if (navHomeBtn) navHomeBtn.textContent = getText('home');
      
      const navServerChartBtn = document.getElementById('navServerChartBtn');
      if (navServerChartBtn) navServerChartBtn.textContent = getText('serverChart');
      
      const navCreateBtn = document.getElementById('navCreateBtn');
      if (navCreateBtn) navCreateBtn.textContent = getText('create');
      
      const navCommunityBtn = document.getElementById('navCommunityBtn');
      if (navCommunityBtn) navCommunityBtn.textContent = getText('community');
      
      // ì‚¬ì´ë“œë°” í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      const sidebarProfileLink = document.getElementById('sidebarProfileLink');
      if (sidebarProfileLink) sidebarProfileLink.textContent = getText('profile');
      
      const sidebarMessageLink = document.getElementById('sidebarMessageLink');
      if (sidebarMessageLink) sidebarMessageLink.textContent = getText('message');
      
      const sidebarFriendsLink = document.getElementById('sidebarFriendsLink');
      if (sidebarFriendsLink) sidebarFriendsLink.textContent = getText('friends');
      
      const sidebarCustomerServiceLink = document.getElementById('sidebarCustomerServiceLink');
      if (sidebarCustomerServiceLink) sidebarCustomerServiceLink.textContent = getText('customerService');
      
      const sidebarLanguageLink = document.getElementById('sidebarLanguageLink');
      if (sidebarLanguageLink) sidebarLanguageLink.textContent = 'ğŸŒ ' + getText('languageSettings');
      
      const sidebarMembersBtn = document.getElementById('sidebarMembersBtn');
      if (sidebarMembersBtn) sidebarMembersBtn.textContent = getText('membersList');
      
      // í”„ë¦¬ë¯¸ì—„ ë§í¬ ì°¾ê¸° ë° ì—…ë°ì´íŠ¸
      const sidebarPremiumLink = Array.from(document.querySelectorAll('.sidebar-link')).find(a => a.textContent.includes('í”„ë¦¬ë¯¸ì—„') || a.textContent.includes('Premium') || a.textContent.includes('é«˜çº§ä¼šå‘˜') || a.textContent.includes('ãƒ—ãƒ¬ãƒŸã‚¢ãƒ '));
      if (sidebarPremiumLink) sidebarPremiumLink.innerHTML = '<b>' + getText('premium') + '</b>';
      
      // ì¸ë²¤í† ë¦¬ ë§í¬ ì°¾ê¸° ë° ì—…ë°ì´íŠ¸
      const sidebarInventoryLink = Array.from(document.querySelectorAll('.sidebar-link')).find(a => a.textContent.includes('ì¸ë²¤í† ë¦¬') || a.textContent.includes('Inventory') || a.textContent.includes('åº“å­˜') || a.textContent.includes('ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª'));
      if (sidebarInventoryLink) sidebarInventoryLink.textContent = getText('inventory');
      
      // ì´ë²¤íŠ¸ ë§í¬ ì°¾ê¸° ë° ì—…ë°ì´íŠ¸
      const sidebarEventLink = Array.from(document.querySelectorAll('.sidebar-link')).find(a => a.textContent.includes('ì´ë²¤íŠ¸') || a.textContent.includes('Event') || a.textContent.includes('æ´»åŠ¨') || a.textContent.includes('ã‚¤ãƒ™ãƒ³ãƒˆ'));
      if (sidebarEventLink) sidebarEventLink.textContent = getText('event');
      
      // ê²€ìƒ‰ ì…ë ¥ì°½ ì—…ë°ì´íŠ¸
      const searchInput = document.getElementById('searchInput');
      if (searchInput) searchInput.placeholder = getText('search');
      
      // ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ì—…ë°ì´íŠ¸
      const showLoginBtn = document.getElementById('showLogin');
      if (showLoginBtn) showLoginBtn.textContent = getText('login');
      
      const showSignupBtn = document.getElementById('showSignup');
      if (showSignupBtn) showSignupBtn.textContent = getText('signup');
      
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) logoutBtn.textContent = getText('logout');
      
      // í™˜ì˜ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
      const welcomeMessage = document.getElementById('welcomeMessage');
      if (welcomeMessage) {
        const userNickname = document.getElementById('userNickname');
        if (userNickname) {
          welcomeMessage.innerHTML = getText('welcome') + ', <span id="userNickname">' + userNickname.textContent + '</span>ë‹˜!';
        }
      }
    }

    // ëª¨ë“  ë²„íŠ¼/ì´ë²¤íŠ¸ ë“±ë¡ì€ DOMContentLoaded ì´í›„ì—ë§Œ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', function() {
      // í˜ì´ì§€ ë¡œë“œ ì‹œ UI í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      updateUITexts();
      
      document.getElementById('closeModal').onclick = closeModal;
      document.getElementById('modalBg').onclick = function(e) {
        if (e.target === this) closeModal();
      };
      var navHomeBtn = document.getElementById('navHomeBtn');
      if (navHomeBtn) navHomeBtn.addEventListener('click', function(e) {
        e.preventDefault();
        showHomePanel();
      });
      var navServerChartBtn = document.getElementById('navServerChartBtn');
      if (navServerChartBtn) navServerChartBtn.addEventListener('click', function(e) {
        e.preventDefault();
        showServerChart();
      });
      var navCommBtn = document.getElementById('navCommunityBtn');
      if (navCommBtn) navCommBtn.addEventListener('click', function(e) {
        e.preventDefault();
        showCommunity();
      });
      var navCreateBtn = document.getElementById('navCreateBtn');
      if (navCreateBtn) navCreateBtn.addEventListener('click', function(e) {
        e.preventDefault();
        showCreatePanel();
      });
      var sidebarFriendsLink = document.getElementById('sidebarFriendsLink');
      if (sidebarFriendsLink) sidebarFriendsLink.addEventListener('click', function(e) {
        e.preventDefault();
        showFriendsPanel();
      });
      var sidebarMessageLink = document.getElementById('sidebarMessageLink');
      if (sidebarMessageLink) sidebarMessageLink.addEventListener('click', function(e) {
        e.preventDefault();
        showMessagePanel();
      });
      var sidebarPremiumLink = Array.from(document.querySelectorAll('.sidebar-link')).find(a => a.textContent.includes('í”„ë¦¬ë¯¸ì—„') || a.textContent.includes('Premium') || a.textContent.includes('é«˜çº§ä¼šå‘˜') || a.textContent.includes('ãƒ—ãƒ¬ãƒŸã‚¢ãƒ '));
      if (sidebarPremiumLink) sidebarPremiumLink.addEventListener('click', function(e) {
        e.preventDefault();
        showPremiumPanel();
      });
      var sidebarInventoryLink = Array.from(document.querySelectorAll('.sidebar-link')).find(a => a.textContent.includes('ì¸ë²¤í† ë¦¬') || a.textContent.includes('Inventory') || a.textContent.includes('åº“å­˜') || a.textContent.includes('ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª'));
      if (sidebarInventoryLink) sidebarInventoryLink.addEventListener('click', function(e) {
        e.preventDefault();
        showInventoryPanel();
      });
      var sidebarProfileLink = document.getElementById('sidebarProfileLink');
      if (sidebarProfileLink) sidebarProfileLink.addEventListener('click', function(e) {
        e.preventDefault();
        showProfilePanel();
      });
      var sidebarCustomerServiceLink = document.getElementById('sidebarCustomerServiceLink');
      if (sidebarCustomerServiceLink) sidebarCustomerServiceLink.addEventListener('click', function(e) {
        e.preventDefault();
        showCustomerServicePanel();
      });
      var sidebarLanguageLink = document.getElementById('sidebarLanguageLink');
      if (sidebarLanguageLink) sidebarLanguageLink.addEventListener('click', function(e) {
        e.preventDefault();
        showLanguagePanel();
      });
      // ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ì´ë²¤íŠ¸
      const showLoginBtn = document.getElementById('showLogin');
      if (showLoginBtn) {
        showLoginBtn.onclick = function() {
          showLoginForm();
        };
      }
      
      const showSignupBtn = document.getElementById('showSignup');
      if (showSignupBtn) {
        showSignupBtn.onclick = function() {
          showSignupForm();
        };
      }
      
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.onclick = function() {
          auth.signOut().then(() => {
            showHomePanel();
          });
        };
      }

      // ì¸ì¦ ìƒíƒœ ë³€ê²½ ê°ì§€
      auth.onAuthStateChanged(function(user) {
        var btn = document.getElementById('sidebarMembersBtn');
        if (!btn) return;
        if (user && user.uid === ADMIN_UID) {
          btn.style.display = '';
          btn.onclick = function() { showMembersPanel(); };
        } else {
          btn.style.display = 'none';
          btn.onclick = null;
        }
        
        // ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ UI ì—…ë°ì´íŠ¸
        if (user) {
          // ì°¨ë‹¨ ìƒíƒœ í™•ì¸
          db.ref('users/' + user.uid).once('value').then(snap => {
            const userData = snap.val() || {};
            if (userData.blocked || userData.ipBlocked) {
              showBlockedMessage(userData.robloxNickname);
              return;
            }
            
            const loginButtons = document.getElementById('loginButtons');
            const userInfo = document.getElementById('userInfo');
            const userNickname = document.getElementById('userNickname');
            
            if (loginButtons) loginButtons.style.display = 'none';
            if (userInfo) userInfo.style.display = 'block';
            if (userNickname) userNickname.textContent = userData.robloxNickname || 'ì‚¬ìš©ì';
            
            // ë¡œê·¸ì¸ ì‹œ ìë™ìœ¼ë¡œ í™ˆìœ¼ë¡œ ì´ë™
            setTimeout(() => {
              showHomePanel();
            }, 100);
          });
        } else {
          const loginButtons = document.getElementById('loginButtons');
          const userInfo = document.getElementById('userInfo');
          
          if (loginButtons) loginButtons.style.display = 'block';
          if (userInfo) userInfo.style.display = 'none';
        }
      });
      
      // í˜ì´ì§€ ë¡œë“œ ì‹œ í™ˆ íŒ¨ë„ í‘œì‹œ
      showHomePanel();
    });
    // ì„œë²„ ì°¨íŠ¸(ì „ì²´ ì„œë²„ ëª©ë¡) í‘œì‹œ í•¨ìˆ˜

    function showServerChart() {
      // ì„œë²„ ì°¨íŠ¸ ê²€ìƒ‰ ì…ë ¥ ì¶”ê°€
      document.getElementById('formContainer').innerHTML = '<h2>' + getText('serverChart') + '</h2>' +
        '<input type="text" id="serverSearchInput" placeholder="' + getText('search') + '..." style="width:60%;padding:8px 12px;margin-bottom:12px;border-radius:8px;border:1.5px solid #232428;background:#18191c;color:#fff;font-size:1rem;outline:none;">' +
        '<div id="serverChartList">' + getText('loading') + '...</div>';
      db.ref('users').once('value').then(snap => {
        const users = snap.val();
        let html = '<table id="serverChartTable" style="width:100%;background:#232428;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #18191c;font-size:16px;color:#e3e3e3;">';
        html += '<tr><th>ë‹‰ë„¤ì„</th><th>ìƒíƒœ</th><th>ìƒì„±ì¼</th><th>ì°¸ì—¬</th></tr>';
        for (const uid in users) {
          const user = users[uid];
          if (!user.server) continue;
          let statusKor = '';
          switch (user.server.status) {
            case 'pending': statusKor = 'ëŒ€ê¸°ì¤‘'; break;
            case 'approved': statusKor = 'ìš´ì˜ì¤‘'; break;
            case 'stopped': statusKor = 'ì •ì§€ë¨'; break;
            case 'paused': statusKor = 'ì¼ì‹œì •ì§€'; break;
            default: statusKor = user.server.status;
          }
          let joinCell = '-';
          if (auth.currentUser && auth.currentUser.uid !== uid) {
            joinCell = `<span id="joinStatus-${uid}"></span> <button id="joinBtn-${uid}" data-uid="${uid}">ì°¸ì—¬ ì‹ ì²­</button>`;
          }
          html += '<tr data-nick="' + (user.robloxNickname || '') + '" data-status="' + statusKor + '">' +
            '<td>' + (user.robloxNickname || '-') + '</td>' +
            '<td>' + statusKor + '</td>' +
            '<td>' + (user.server.requestedAt ? new Date(user.server.requestedAt).toLocaleString() : '-') + '</td>' +
            '<td>' + joinCell + '</td>' +
            '</tr>';
        }
        html += '</table>';
        document.getElementById('serverChartList').innerHTML = html;
        // ê²€ìƒ‰ í•„í„°
        setTimeout(function() {
          var input = document.getElementById('serverSearchInput');
          if (input) {
            input.addEventListener('input', function() {
              const v = this.value.trim().toLowerCase();
              document.querySelectorAll('#serverChartTable tr[data-nick]').forEach(function(tr) {
                if (!v) {
                  tr.style.display = '';
                  return;
                }
                const nick = tr.getAttribute('data-nick').toLowerCase();
                const status = tr.getAttribute('data-status').toLowerCase();
                tr.style.display = (nick.includes(v) || status.includes(v)) ? '' : 'none';
              });
            });
            // ìµœì´ˆ ì§„ì… ì‹œ ëª¨ë‘ í‘œì‹œ
            document.querySelectorAll('#serverChartTable tr[data-nick]').forEach(function(tr) {
              tr.style.display = '';
            });
          }
        }, 100); // DOM ë Œë” í›„ ë°”ì¸ë”©
        // ì°¸ì—¬ ì‹ ì²­ ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡
        for (const uid in users) {
          if (!users[uid].server) continue;
          if (auth.currentUser && auth.currentUser.uid !== uid) {
            const btn = document.getElementById('joinBtn-' + uid);
            if (btn) {
              btn.onclick = function() {
                const isReRequest = btn.textContent === 'ì¬ì‹ ì²­';
                const confirmMessage = isReRequest ? 'ì„œë²„ ì°¸ì—¬ë¥¼ ì¬ì‹ ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' : 'ì„œë²„ ì°¸ì—¬ë¥¼ ì‹ ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?';
                
                if (confirm(confirmMessage)) {
                  // ì¬ì‹ ì²­ì¸ ê²½ìš° ê¸°ì¡´ ìš”ì²­ ì‚­ì œ
                  if (isReRequest) {
                    db.ref('serverJoinRequests/' + uid + '/' + auth.currentUser.uid).remove();
                    db.ref('serverJoinApprovals/' + uid + '/' + auth.currentUser.uid).remove();
                  }
                  
                  db.ref('serverJoinRequests/' + uid + '/' + auth.currentUser.uid).set({
                    status: 'pending',
                    requestedAt: Date.now(),
                    requesterUid: auth.currentUser.uid
                  }).then(() => {
                    showMessage('ì„œë²„ ì°¸ì—¬ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                  });
                }
              };
              
              // ì°¸ì—¬ ìƒíƒœ ì‹¤ì‹œê°„ í‘œì‹œ
              db.ref('serverJoinRequests/' + uid + '/' + auth.currentUser.uid).on('value', function(snap) {
                const req = snap.val();
                if (!req) {
                  document.getElementById('joinStatus-' + uid).innerText = '';
                  btn.disabled = false;
                  btn.textContent = 'ì°¸ì—¬ ì‹ ì²­';
                } else if (req.status === 'pending') {
                  document.getElementById('joinStatus-' + uid).innerText = 'ì„œë²„ ì†Œìœ ì ìŠ¹ì¸ ëŒ€ê¸°';
                  btn.disabled = true;
                  btn.textContent = 'ì‹ ì²­ë¨';
                } else if (req.status === 'approved') {
                  // ì„œë²„ ì†Œìœ ìê°€ ìŠ¹ì¸í•˜ë©´ ì‚¬ì´íŠ¸ ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
                  db.ref('serverJoinApprovals/' + uid + '/' + auth.currentUser.uid).on('value', function(approvSnap) {
                    const approv = approvSnap.val();
                    if (approv && approv.status === 'approved') {
                      document.getElementById('joinStatus-' + uid).innerHTML = users[uid].server.url ? ('<a href="' + users[uid].server.url + '" target="_blank" style="color:#4caf50;">ì„œë²„ ì…ì¥</a>') : 'ì£¼ì†Œ ì—†ìŒ';
                      btn.style.display = 'none';
                    } else if (approv && approv.status === 'rejected') {
                      document.getElementById('joinStatus-' + uid).innerText = 'ì‚¬ì´íŠ¸ ê´€ë¦¬ì ê±°ì ˆ';
                      btn.disabled = false;
                      btn.textContent = 'ì¬ì‹ ì²­';
                    } else {
                      document.getElementById('joinStatus-' + uid).innerText = 'ì‚¬ì´íŠ¸ ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°';
                      btn.style.display = 'none';
                    }
                  });
                } else if (req.status === 'rejected') {
                  document.getElementById('joinStatus-' + uid).innerText = 'ì„œë²„ ì†Œìœ ì ê±°ì ˆ';
                  btn.disabled = false;
                  btn.textContent = 'ì¬ì‹ ì²­';
                }
              });
            }
          }
        }

        // ì‚¬ì´íŠ¸ ê´€ë¦¬ììš© ì°¸ì—¬ ìŠ¹ì¸ ë° ì¶”ë°© ìŠ¹ì¸ì€ ë³„ë„ í•¨ìˆ˜ë¡œ ì²˜ë¦¬
      }); // End of db.ref('users').once('value').then
    } // End of showServerChart
  </script>
</body>
</html>
